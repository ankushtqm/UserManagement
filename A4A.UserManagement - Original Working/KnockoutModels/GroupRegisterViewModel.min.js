function Group(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){var d=this;d.HiddenGroupId=ko.observable(n);d.GroupName=ko.observable(t);d.AppliesToSiteId=ko.observable(i);d.GroupTypeId=ko.observable(r);d.GroupTypeName=ko.observable();d.LyrisListName=ko.observable(u);d.LyrisShortDescription=ko.observable(f);d.GroupSiteUrl=ko.observable(e);d.ParentGroupId=ko.observable(h);d.Liaison1=ko.observable(a);d.Mission=ko.observable(v);d.LyrisSendId=ko.observable(y);d.DepartmentId=ko.observable();d.rdoBounceReports=ko.observable("Off");d.InfoMessage=ko.observable();d.gId=ko.observable();d.edit=ko.observable(!1);d.step1Validation=ko.validatedObservable([d.GroupName.extend({required:{message:" Group Name is required."}}),d.LyrisListName.extend({required:{message:" List Name is required."}}),d.Liaison1.extend({required:{message:" Please choose a Liaison."}}),]);d.BounceReports=ko.computed(function(){return d.rdoBounceReports()==="On"?!0:!1});d.rdoGAB=ko.observable("Off");d.GAB=ko.computed(function(){return d.rdoGAB()==="On"?!0:!1});d.requestedTeamMembers=ko.observableArray(b);d.requestedSelectedMembers=ko.observableArray(k);d.ShowErr=ko.observable(!1);d.GroupName.subscribe(function(){d.removeErrors();$("#hdnGroupName").val(d.GroupName());d.LyrisShortDescription(d.GroupName())});d.LyrisListName.subscribe(function(){d.removeErrors()});d.removeErrors=function(){d.ShowErr(!1)};d.LyrisSends=ko.observableArray();d.getData1=function(){$.ajax({url:"/api/LyrisSend",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){var t={name:key,value:n[key]};d.LyrisSends.push(t)}},error:function(){}})};d.Dept=ko.observableArray();d.getDepartments=function(){$.ajax({url:"/api/GetDept",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){var t=JSON.parse(n);$.each(t,function(n,t){var i={name:t.DepartmentDetail,value:t.DepartmentId};d.Dept.push(i)})},error:function(){}})};d.ParentGroups=ko.observableArray();d.getData2=function(){$.ajax({url:"/api/getGroupNamesWithId",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){var t={name:key,value:n[key]};d.ParentGroups.push(t)}},error:function(){}})};d.GroupTypes=ko.observableArray();d.getDataGroupTypes=function(){$.ajax({url:"/api/getGroupType",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){var t={value:key,name:n[key]};d.GroupTypes.push(t)}},error:function(){}})};d.Liaisons=ko.observableArray();d.getDataLiaisons=function(){$.ajax({url:"/api/GetA4AStaffwTitle",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n)if(!(n===null||n==="undefined")){var t=n[key].split(":"),i={value:t[1],name:t[0]};d.Liaisons.push(i)}},error:function(){}})};d.AppliesToSiteIdValues=ko.observableArray([{id:"2",name:"Members"},{id:"1",name:"Fuels"},{id:"3",name:"Both"}]);d.ShowErr=ko.observable(!1);d.addGroup=function(){var t=ko.validation.group(groupRegisterViewModel.addGroupViewModel,{deep:!0}),n;if($(".overlay").show(),d.step1Validation.isValid())$(".overlay").show(),d.ShowErr(!1),n=ko.toJSON(this),$.ajax({url:"/api/group",type:"post",data:n,contentType:"application/json",success:function(){},error:function(n){$(".overlay").hide();d.InfoMessage("Error Occured: "+n.responseText);setTimeout(function(){d.InfoMessage("")},3e3)}}).done(function(n){$(".overlay").hide();d.InfoMessage("Group has been saved successfully");d.HiddenGroupId(n.GroupId);$("#hdnGroupId").val(n.GroupId);$("#hdnGroupName").val(d.GroupName());$("#Headtitle").html("Create New Group");$(".GroupTitle").html().indexOf("Group:")<1&&$(".GroupTitle").append("<br/> <span   class='spnGroupName niceLabel-black   margin-topbot10'>Group: "+$("#hdnGroupName").val()+"<\/span");$(".NoEdit").prop("disabled",!0).css("background-color","lightgrey");groupRegisterViewModel.addA4AStaffViewModel.gId(n.GroupId);groupRegisterViewModel.UMSubscribeModel.gId(n.GroupId);groupRegisterViewModel.addTaskForceWorkGroup.gId(n.GroupId);councilCommitteeViewModel.gId=n.GroupId;groupRegisterViewModel.addA4AStaffViewModel.hasBounceReports(n.BounceReports)});else return d.ShowErr(!0),d.step1Validation.errors.showAllMessages(),$(".overlay").hide(),!1};d.load=function(n){var t=JSON.parse(n.responseText);d.GroupName(t.GroupName);d.AppliesToSiteId(t.AppliesToSiteId);d.GroupTypeId(t.GroupTypeId);d.LyrisListName(t.LyrisListName);d.LyrisShortDescription(t.LyrisShortDescription);d.GroupSiteUrl(t.GroupSiteUrl);d.ParentGroupId(t.ParentGroupId);d.Liaison1(t.Liaison1UserId);d.Mission(t.Mission);d.LyrisSendId(t.LyrisSendId);d.DepartmentId(t.DepartmentId);t.BounceReports?d.rdoBounceReports("On"):d.rdoBounceReports("Off");t.GAB?d.rdoGAB("On"):d.rdoGAB("Off");d.edit(!0);$(".NoEdit").prop("disabled",!0).css("background-color","lightgrey")}}function councilCommitteeViewModel(n){function u(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]}function f(n,t,i){$.ajax({url:n,type:"post",contentType:"application/json",success:function(){alert("Removed "+i+" for "+t)},error:function(n){var t=eval("("+n.responseText+")");return $(event.target).parent().append("<span id='"+compPrimError+"' class='error'><br/><i class='fa fa-times-circle'>&nbsp;<\/i>"+t.Message+"<\/span>"),!1}})}var i,r,t;self=this;self.Company=ko.observable(n&&n.Company||"1");self.errorPrimUser=ko.observable();self.errorAltUser=ko.observable();i=sessionStorage.getItem("Prim"+n.Company.replace(/\s/g,""));r=sessionStorage.getItem("Alt"+n.Company.replace(/\s/g,""));self.PrimUserValue=ko.observable(i);self.AltUserValue=ko.observable(r);self.PrimaryID=ko.observable("Prim"+n.Company.replace(/\s/g,""));self.AlternateID=ko.observable("Alt"+n.Company.replace(/\s/g,""));t=$("#hdnGroupId").val()||parseInt(u("gid"));self.gId=ko.observable(t);self.errorMessage=ko.observable();t>0?$("#errorPrimUser").val(""):$("#errorPrimUser").val("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!");self.CompanyUsers=ko.observableArray();self.getCompanyUsers=function(t,i){var r=t.term;$.ajax({url:"/api/GetComapnyUsers/?CompanyName="+n.Company,type:"GET",cache:!1,data:t,dataType:"json",success:function(n){i($.map(n,function(n,t){return{label:t,text:n,value:""}}))}})};self.closeSelect=function(){};self.selectedValues=ko.observableArray();self.selectPrimary=function(i,r){var f,e,s,h,o;if($("#hdnChairComp").val().trim()===n.Company.trim())return alert(n.Company+" representative has been set as Chair. So cannot add Primary contact for them"),!1;if($("#hdnViceChairComp").val().trim()===n.Company.trim())return alert(n.Company+" representative has been set as Vice Chair. So cannot add Primary contact"),!1;if(f=n.Company.replace(/\s+/g,"")+"PrimError",e=$("#"+f),typeof e!="undefined"&&e.remove(),t=$("#hdnGroupId").val()||parseInt(u("gid")),s=[{Name:r.item.label,UserId:r.item.text,Primary:!0,GroupId:t,CompanyName:n.Company}],h=ko.utils.stringifyJson(s),$.ajax({url:"/api/UserGroup",type:"post",data:h,contentType:"application/json",success:function(){alert($("#hdnChairComp").val()+r.item.label+" has been successfully added as Primary for "+n.Company)},error:function(n){var t=eval("("+n.responseText+")"),r=$(i.target).parent();return r.append("<span id='"+f+"' class='error'><br/><i class='fa fa-times-circle'>&nbsp;<\/i>"+$(i.target).prev().val()+" "+t.Message+"<\/span>"),$(i.target).prev().val(""),!1}}),o=$(this).val().indexOf("all"),o>-1&&o<1)return $(this).val(""),!1;$(this).val(r.item.label)};self.removePrimGroupUser=function(i,r){var u="/api/RemoveGrpUsrbyComp/?CompanyName="+n.Company+"&GroupId="+t+"&RoleId=1";f(u,n.Company,"Primary");$(r.target).prev().val("")};self.removeAltGroupUser=function(i,r){var u="/api/RemoveGrpUsrbyComp/?CompanyName="+n.Company+"&GroupId="+t+"&RoleId=2";f(u,n.Company,"Alternate");$(r.target).prev().val("")};self.selectAlternate=function(i,r){var u,f,e,o;alert($("#hdnViceChairComp").val()+" & "+n.Company);u=n.Company.replace(/\s+/g,"")+"PrimAlt";f=$("#"+u);typeof f!="undefined"&&f.remove();e=[{Name:r.item.label,UserId:r.item.text,Alternate:!0,GroupId:t,CompanyName:n.Company}];o=ko.utils.stringifyJson(e);$.ajax({url:"/api/UserGroup",type:"post",data:o,contentType:"application/json",success:function(){alert(r.item.label+" has been successfully added as Alternate for "+n.Company)},error:function(n){var t=eval("("+n.responseText+")");return $(i.target).parent().append("<span id='"+u+"' class='error'><br/><i class='fa fa-times-circle'><\/i>"+$(i.target).prev().val()+" "+t.Message+"<\/span>"),$(i.target).prev().val(""),!1}})}}var groupRegisterViewModel,A4AStaffModel=function(n){var t=this;t.selected=ko.observable();t.A4AStaff=ko.observableArray(n);t.A4AStaffSelected=ko.observable();t.gId=ko.observable();t.hasBounceReports=ko.observable(!1);t.UMContacts=ko.observableArray();t.InfoMessage=ko.observable();t.ErrorMessage=ko.observable();t.GroupName=ko.observable();t.isDistribution=ko.observable(!1);t.edit=ko.observable(!1);t.A4AStaffList=ko.observableArray();t.getA4AStaffList=function(){$.ajax({url:"/api/GetA4AStaffwTitle",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n)if(!(n===null||n==="undefined")){var i=n[key].split(":"),r={value:i[1],name:i[0]};t.A4AStaffList.push(r)}},error:function(){}})};t.setChosen=function(){ko.bindingHandlers.chosen={init:function(n){$(n).addClass("chzn-select");$(n).chosen()},update:function(n){$(n).trigger("liszt:updated")}}};t.selected.subscribe(function(n){var i,r;if(isNaN(t.gId()))t.ErrorMessage("No Group ID exists!"),setTimeout(function(){t.ErrorMessage("")},5e3);else for(i in n)r=ko.utils.arrayFirst(t.A4AStaff(),function(t){return n[i].value===t.UserId}),r?(t.ErrorMessage("User"+n[i].name+" already exists!"),setTimeout(function(){t.ErrorMessage("")},5e3)):t.A4AStaff.push({GroupId:t.gId(),UserId:n[i].value,Name:n[i].name,ManageGroup:!1,EmailAdmin:!1,BounceReports:!1,StaffSubscribe:!1,Alerts:!1,hasBounceReports:t.hasBounceReports()})});t.removeA4AStaff=function(n){var i=ko.utils.stringifyJson(n);i="["+i+"]";$.ajax({url:"/api/RemoveGroupUser",type:"post",data:i,contentType:"application/json",success:function(){},error:function(n){return t.ErrorMessage("Error:"+n.responseText),setTimeout(function(){t.ErrorMessage("")},5e3),!1}});t.A4AStaff.remove(n)};t.removeUMContacts=function(n){t.A4AStaff.remove(n)};t.save=function(){var r,i,n;for($(".overlay").show(),r=ko.utils.stringifyJson(t.A4AStaff),i=!0,n=0;n<t.A4AStaff().length;n++){var h=t.A4AStaff()[n].GroupId,u=t.A4AStaff()[n].Name,f=t.A4AStaff()[n].ManageGroup,e=t.A4AStaff()[n].EmailAdmin,o=t.A4AStaff()[n].BounceReports,s=t.A4AStaff()[n].StaffSubscribe;if(i=f||e||o||s?!0:!1,!i){t.ErrorMessage("All staff members in this list should have at least one role. Please choose a role for staff member - "+u+" before saving!");setTimeout(function(){t.ErrorMessage("")},1e4);$(".overlay").hide();return}}$.ajax({url:"/api/A4AUserGroup/?IsStaff=true&IsGGA=false",type:"post",data:r,contentType:"application/json",success:function(){t.InfoMessage("A4A Staff changes saved successfully");setTimeout(function(){t.InfoMessage("")},5e3)},error:function(n){return t.ErrorMessage("Error:"+n.responseText),setTimeout(function(){t.ErrorMessage("")},5e3),!1}}).done(function(){$(".overlay").hide()})};t.load=function(){var n="/api/geta4ausergroups/?GroupId="+t.gId()+"&IsA4AStaff=true";$.ajax({url:n,type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(i=0;i<n.length;i++)t.A4AStaff.push({GroupId:n[i].GroupId,UserId:n[i].UserId,Name:n[i].UserName,ManageGroup:n[i].ManageGroup,EmailAdmin:n[i].EmailAdmin,BounceReports:n[i].BounceReports,StaffSubscribe:n[i].StaffSubscribe,Alerts:n[i].Alerts,hasBounceReports:t.hasBounceReports()})},error:function(n){t.InfoMessage("Exception in Get Liaisons:"+n.responseText);setTimeout(function(){t.InfoMessage("")},5e3)}})}},AutoCompleteExample,TaskForceWorkGroup;ko.bindingHandlers.ko_autocomplete={init:function(n,t){$(n).autocomplete(t())},update:function(n,t){$(n).autocomplete("option","source",t().source)}},function(n){var t=function(){function n(){this.selectedValue=ko.observable();this.selectedValuesNW=ko.observableArray()}return n.prototype.gId=ko.observable(0),n.prototype.errorMessage=ko.observable(),n.prototype.InfoMessage=ko.observable(),n.prototype.edit=ko.observable(!1),n.prototype.SorI=0,n.prototype.getLanguages=function(n,t){var r=$("#hdnGroupTypeId").val(),i="";i=$("#hdnGroupTypeId").val()?"/api/GetAllContacts/?grouptype="+r:"/api/GetAllContacts/";$.ajax({url:i,type:"GET",cache:!1,data:n,dataType:"json",success:function(n){t($.map(n,function(n,t){return{label:n,text:t,value:""}}))}})},n.prototype.selectedValues=ko.observableArray(),n.prototype.selectLanguage=function(t,i){var f=0,r,u,e;if(f=$("#hdnGroupId").val(),f>0||n.prototype.gId()>0?n.prototype.errorMessage(""):(n.prototype.errorMessage("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!"),setTimeout(function(){n.prototype.errorMessage("")},5e3)),r="",+$("#hdnSubscribeInformational").val()==1)r="Subscribe",u=[{Name:i.item.label,UserId:i.item.text,Subscribe:!0,GroupId:n.prototype.gId(),CompanyName:""}];else if(+$("#hdnSubscribeInformational").val()==2)r="Informational",u=[{Name:i.item.label,UserId:i.item.text,Informational:!0,GroupId:n.prototype.gId(),CompanyName:""}];else{n.prototype.errorMessage("Subscription group type is not selected, Contact IT for help!");setTimeout(function(){n.prototype.errorMessage("")},5e3);return}e=ko.utils.stringifyJson(u);$.ajax({url:"/api/UserGroup",type:"post",data:e,contentType:"application/json",success:function(){n.prototype.selectedValues.push({Name:i.item.label,UserId:i.item.text,role:!0,GroupId:n.prototype.gId(),CompanyName:""});n.prototype.InfoMessage("User "+i.item.label+" has been successfully added successfully!");setTimeout(function(){n.prototype.InfoMessage("")},5e3)},error:function(t){n.prototype.errorMessage("Error in adding user to group:"+t.responseText);setTimeout(function(){n.prototype.errorMessage("")},5e3)}}).done(function(){});$(t.target).prev().val("");$("#acSubInfoUser").val("")},n.prototype.selectChair=function(t,i){var o=0,r,u,f,e;if(n.prototype.errorMessage=ko.observable(),o=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId(),r="",i.item.label){if(r=i.item.label.trim().slice(i.item.label.indexOf("(")+1,-1),$("#hdnChairComp").val(r),u=$("#Prim"+r.replace(/\s/g,"")),u.val().length>0)return $("#spnMessage").html("You already have a primary representative for "+r+".  Select another company chair or delete the contact below."),!1;$("#Prim"+r.replace(/\s/g,"")).attr("disabled","disabled")}if(!(r.length>0))return alert("No company name found for Chair. So the selection could not be completed"),!1;f=[{Name:i.item.label,UserId:i.item.text,Chair:!0,GroupId:n.prototype.gId()}];e=ko.utils.stringifyJson(f);$.ajax({url:"/api/UserGroup",type:"post",data:e,contentType:"application/json",success:function(){$("#spnMessage").html(i.item.label+"has been successfully saved as Chair!!")},error:function(n){$("#spnMessage").html("Error in saving Group Chair"+n.responseText)}}).done(function(){})},n.prototype.selectViceChair=function(t,i){var o=0,r,u,f,e;if(o=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId(),n.prototype.errorMessage=ko.observable(),r="",i.item.label){if(r=i.item.label.trim().slice(i.item.label.indexOf("(")+1,-1),$("#hdnViceChairComp").val(r),u=$("#Prim"+r.replace(/\s/g,"")),u.val().length>0)return $("#spnMessage").html("You already have a primary representative for "+r+".  Select another company vice chair or delete the contact below."),!1;$("#Prim"+r.replace(/\s/g,"")).attr("disabled","disabled")}r.length>0||(alert("No company name found for Vice Chair. So the selection could not be completed"),retun);f=[{Name:i.item.label,UserId:i.item.text,ViceChair:!0,GroupId:n.prototype.gId()}];e=ko.utils.stringifyJson(f);$.ajax({url:"/api/UserGroup",type:"post",data:e,contentType:"application/json",success:function(){$("#spnMessage").html(i.item.label+"has been successfully saved as Vice Chair!!");$("#hdnPrimary").val()},error:function(n){$("#spnMessage").html("Error in saving Group Vice Chair"+n.responseText)}}).done(function(){})},n.prototype.addGroup=function(){var t=ko.utils.stringifyJson(n.prototype.selectedValues);$.ajax({url:"/api/UserGroup",type:"post",data:t,contentType:"application/json",success:function(){n.prototype.InfoMessage("User added to the Group Successfully!");setTimeout(function(){n.prototype.InfoMessage("")},3e3)},error:function(t){var i=eval("("+t.responseText+")");return n.prototype.errorMessage("Error in Adding users. "+t.responseText),!1}})},n.prototype.removeUMContacts=function(t){var i=ko.utils.stringifyJson(t);i="["+i+"]";$.ajax({url:"/api/RemoveGroupUser",type:"post",data:i,contentType:"application/json",success:function(){n.prototype.InfoMessage("User removed from the group successfully!");setTimeout(function(){n.prototype.InfoMessage("")},3e3)},error:function(t){var i=eval("("+t.responseText+")");return n.prototype.errorMessage("Error in removing user"+exception.responseText),!1}});n.prototype.selectedValues.remove(t)},n.prototype.load=function(t,r){var u="/api/GetGroupUserlineItem/?GroupId="+t+"&RoleId="+r;$.ajax({url:u,type:"GET",contentType:"application/json",success:function(t){var u=JSON.parse(t),f,r;for(i=0;i<u.length;i++)f="",r={},r.Name=u[i].UserName,r.CompanyName="("+u[i].CompanyName+")",r.UserId=u[i].UserId,r[u[i].Role]=!0,r.GroupId=u[i].GroupId,n.prototype.selectedValues.push(r)},error:function(t){n.prototype.errorMessage("Exception in Subscribe/Informational user list:"+t.responseText)}})},n.prototype.removeChairGroupUser=function(t,i){gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();var r="/api/RemoveGrpUsrbyRole/?GroupId="+gId+"&RoleId=3";n.prototype.RemoveGroupUser(r,"","Chair");$(i.target).prev().val("")},n.prototype.removeViceChairGroupUser=function(t,i){gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();var r="/api/RemoveGrpUsrbyRole/?GroupId="+gId+"&RoleId=4";n.prototype.RemoveGroupUser(r,"","Vice Chair");$(i.target).prev().val("")},n.prototype.RemoveGroupUser=function(n){$.ajax({url:n,type:"post",contentType:"application/json",success:function(){$("#spnMessage").html("User removed successfully!!")},error:function(n){var t=eval("("+n.responseText+")");return $("#spnMessage").html("Error removing user!:"+n.responseText),$(event.target).parent().append("<span id='"+compPrimError+"' class='text-danger'><br/><i class='fa fa-times-circle'>&nbsp;<\/i>"+t.Message+"<\/span>"),!1}})},n}();n.ViewModel=t}(AutoCompleteExample||(AutoCompleteExample={})),function(n){var t=function(){function n(){this.selectedValue=ko.observable();this.selectedTskForUserNW=ko.observableArray()}return n.prototype.gId=ko.observable(0),n.prototype.edit=ko.observable(!1),n.prototype.errorMessage=ko.observable(),n.prototype.Roles=ko.observableArray([{id:"20",name:"Administrator"},{id:"3",name:"Chair"},{id:"15",name:"Co-chair"},{id:"16",name:"FAA-chair"},{id:"17",name:"FAA-Co-chair"},{id:"19",name:"Observer"},{id:"8",name:"Secretary"},{id:"6",name:"Spokesperson"},{id:"12",name:"Subscribe"},{id:"18",name:"Team Leader"},{id:"4",name:"Vice Chair"}]),n.prototype.role=ko.observable(),n.prototype.taskRoles=ko.observableArray(),n.prototype.gettaskRoles=function(){$.ajax({url:"/api/GetCommitteRolesbyGType",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){alert(key+n[key]);var t={name:key,value:n[key]};self.taskRoles.push(t)}},error:function(){}})},n.prototype.GetAllUsers=function(t,i){n.prototype.errorMessage();var r=t.term;$.ajax({url:"/api/GetAllContacts",type:"GET",cache:!1,data:t,dataType:"json",success:function(n){i($.map(n,function(n,t){return{label:n,text:t,value:""}}))}})},n.prototype.selectedTskForUser=ko.observableArray(),n.prototype.selectTskFrGroupUser=function(t,i){var o=0,f,e,r,u;o=$("#hdnGroupId").val();n.prototype.errorMessage=ko.observable();isNaN(o)&&isNaN(n.prototype.gId())?n.prototype.errorMessage("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!"):(f=n.prototype.role(),e=$("#inpGroupRole option[value='"+f+"']").text().replace(/\s/g,""),typeof f=="undefined"||n.prototype.gId()<1?n.prototype.errorMessage("Role or GroupId Missing. The user cannot be added to the group."):(r={},r.Name=i.item.label,r.UserId=i.item.text,r.role=e,r[e.replace(/\s/g,"")]=!0,r.CompanyName="",r.GroupId=n.prototype.gId(),u=ko.utils.stringifyJson(r),u="["+u+"]",$.ajax({url:"/api/UserGroup",type:"post",data:u,contentType:"application/json",success:function(){n.prototype.errorMessage(i.item.label+"added to the group:");n.prototype.selectedTskForUser.push(r)},error:function(t){n.prototype.errorMessage("Error adding user to group:"+t.responseText)}}).done(function(){})))},n.prototype.removeUMContacts=function(t){var i=ko.utils.stringifyJson(t);n.prototype.errorMessage();i="["+i+"]";$.ajax({url:"/api/RemoveGroupUser",type:"post",data:i,contentType:"application/json",success:function(){},error:function(t){return n.prototype.errorMessage("Error in removing group user."+t.responseText),!1}});n.prototype.selectedTskForUser.remove(t)},n.prototype.load=function(t){var r="/api/GetGroupUserlineItem/?GroupId="+t;n.prototype.errorMessage();$.ajax({url:r,type:"GET",contentType:"application/json",success:function(t){var u=JSON.parse(t),r;for(i=0;i<u.length;i++)r={},r.Name=u[i].UserName,r.CompanyName="("+u[i].CompanyName+")",r.UserId=u[i].UserId,r.role=u[i].Role,r[u[i].Role.replace(/\s/g,"")]=!0,r.GroupId=u[i].GroupId,n.prototype.selectedTskForUser.push(r)},error:function(t){n.prototype.errorMessage("Exception in loading task force user list:"+t.responseText)}})},n}();n.ViewModel=t}(TaskForceWorkGroup||(TaskForceWorkGroup={}));ko.observableArray.fn.distinct=function(n){var t=this;return t.index={},t.index[n]=ko.observable({}),ko.computed(function(){var i={};ko.utils.arrayForEach(t(),function(t){var r=ko.utils.unwrapObservable(t[n]);r&&(i[r]=i[r]||[],i[r].push(t))});t.index[n];t.index[n](i)}),t};var CommitteePrimAlt=function(n,t,i,r,u,f){this.Name=ko.observable(n);this.UserId=ko.observable(t);this.CompanyName=ko.observable(r);this.Type=ko.observable(i);this.Alternate=ko.observable(u);this.Primary=ko.observable(f)},councilCommitteeGGAViewModel=function(){function r(t){$.ajax({url:t,type:"post",contentType:"application/json",success:function(){},error:function(t){n.errorMessage("Error occured in remove group user!"+t.responseText)}})}var n=this,t;n.gId=ko.observable($("#hdnGroupId").val());t=$("#hdnGroupId").val();n.errorMessage=ko.observable();n.people=ko.observableArray([]).distinct("CompanyName");n.Roles=ko.observableArray([{id:"2",name:"Alternate"},{id:"1",name:"Primary"}]);n.role=ko.observable();n.Companies=ko.observableArray();n.company=ko.observable();n.GetCompanies=$.getJSON("/api/GetCompanies/?isMember=true",function(t){$.each(t,function(t,i){n.Companies.push({id:i,name:t})})});this.selectPrimAltUser4Company=function(i,r){var u,o,h,s;if(isNaN($("#hdnGroupId").val())||(n.gId($("#hdnGroupId").val()),t=$("#hdnGroupId").val()),isNaN(t)||isNaN(n.gId()))n.errorMessage("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!");else{var c=n.role(),f=$("#inpGGAGroupRole option[value='"+c+"']").text(),l=n.company(),e=$("#inpGGACompanies option[value='"+l+"']").text();typeof c=="undefined"||typeof l=="undefined"?n.errorMessage("Role or CompanyName is Missing. The user cannot be added to the group."):(u={},u.Name=r.item.label,u.UserId=r.item.text,u.Type=f,u[f.replace(/\s/g,"")]=!0,u.GroupId=n.gId(),u.CompanyName=e,o=ko.utils.arrayFirst(n.people(),function(n){return r.item.text===n.UserId()}),o?n.errorMessage("The user "+o.Name()+" already exists under "+o.CompanyName()+" "):(h=ko.utils.arrayFirst(n.people(),function(n){return e===n.CompanyName()&&f==="Primary"}),h&&n.removeCommitteePrimAlt(h),s=ko.utils.stringifyJson(u),s="["+s+"]",$.ajax({url:"/api/UserGroupGGA",type:"post",data:s,contentType:"application/json",success:function(){f==="Primary"?n.people.push(new CommitteePrimAlt(r.item.label,r.item.text,f,e,!0,!1)):n.people.push(new CommitteePrimAlt(r.item.label,r.item.text,f,e,!1,!0));n.errorMessage("Successfully added the user!")},error:function(t){n.errorMessage("Error in adding user. "+t.responseText)}})),$("#name-search").val(""))}};n.removeCommitteePrimAlt=function(t){var i,u;isNaN(n.gId())?n.errorMessage("GroupId is missing. The user cannot be removed from the group."):(n.people.remove(t),i=1,t.Type==="Alternate"&&(i=2),u="/api/RemoveGrpUsrbyComp/?CompanyName="+t.CompanyName+"&GroupId="+n.gId()+"&RoleId="+i,r(u,t.CompanyName,t.Type))};this.GetAllUsers=function(t,i){var f=t.term,r=n.company(),u=$("#inpGGACompanies option[value='"+r+"']").text();$.ajax({url:"/api/GetComapnyUsers/?CompanyName="+u,type:"GET",cache:!1,data:t,dataType:"json",success:function(n){i($.map(n,function(n,t){return{label:t,text:n,value:""}}))}})};n.load=function(t){var r="/api/GetGroupUserlineItem/?GroupId="+t+"&RoleId=1,2,3,4";n.errorMessage();$.ajax({url:r,type:"GET",contentType:"application/json",success:function(t){var r=JSON.parse(t);for(i=0;i<r.length;i++)r[i].RoleId===1?n.people.push(new CommitteePrimAlt(r[i].UserName,r[i].UserId,r[i].Role,r[i].CompanyName,!0,!1)):r[i].RoleId===2?n.people.push(new CommitteePrimAlt(r[i].UserName,r[i].UserId,r[i].Role,r[i].CompanyName,!1,!0)):r[i].RoleId===3?($("#GroupChairGGA").val(r[i].UserName+" ("+r[i].CompanyName+")"),$("#hdnChairComp").val(r[i].CompanyName),alert($("#hdnChairComp").val())):r[i].RoleId===4&&($("#GroupViceChairGGA").val(r[i].UserName+" ("+r[i].CompanyName+")"),$("#hdnViceChairComp").val(r[i].CompanyName))},error:function(t){n.errorMessage("Exception in loading task force user list:"+t.responseText)}})}},A4AStaffViewModel=new A4AStaffModel,UMSubscribe=new AutoCompleteExample.ViewModel;$(document).ready(function(){function n(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]}function t(n){var t="/api/GetGroupUserlineItem/?GroupId="+n;$.ajax({url:t,type:"GET",contentType:"application/json",success:function(n){var t=JSON.parse(n),r,u;for(i=0;i<t.length;i++)r=t[i].UserName,u=t[i].CompanyName.replace(/\s/g,""),t[i].RoleId===1?sessionStorage.setItem("Prim"+u,r):t[i].RoleId===2?sessionStorage.setItem("Alt"+u,r):t[i].RoleId===3?($("#GroupChair").val(r+" ("+u+")"),$("#hdnChairComp").val(t[i].CompanyName)):t[i].RoleId===4&&($("#GroupViceChair").val(r+" ("+u+")"),$("#hdnViceChairComp").val(t[i].CompanyName))},error:function(n){ViewModel.prototype.errorMessage("Exception in Subscribe/Informational user list:"+n.responseText)}})}sessionStorage.clear();$("#breadcrumb ul").append('<li><a href="/group/list/"> Group List <\/a><\/li>');ko.components.register("primaryalternate",{viewModel:councilCommitteeViewModel,template:"<div class='row' style='margin-bottom:8px;' > <div class='col-sm-2'> <span class='niceLabel' data-bind='text: Company'><\/span><\/div><div class='col-sm-5' ><input type='text' class='P1 chosen form-control' style='width:300px;' data-bind='value:PrimUserValue,attr: { id:PrimaryID()},ko_autocomplete: { source: getCompanyUsers, select: selectPrimary ,minLength: 3,close: closeSelect }'/><a href='#' class='text-danger' style='vertical-align: middle;padding-left:7px;'  data-bind='click: $data.removePrimGroupUser'>X<\/a><\/div><div class='col-sm-5' ><input type='text' class='A1 chosen form-control' style='width:300px;'    data-bind='value:AltUserValue,attr: { id:AlternateID() },ko_autocomplete: { source: getCompanyUsers, select: selectAlternate ,minLength:3,close: closeSelect }'/><a href='#' class='text-danger' style='vertical-align: middle;padding-left:7px;'  data-bind='click: removeAltGroupUser'>X<\/a><\/div><\/div>"});ko.validation.init({insertMessages:!1});parseInt(n("gid"))>0?(groupRegisterViewModel={addGroupViewModel:new Group,addA4AStaffViewModel:A4AStaffViewModel,UMSubscribeModel:UMSubscribe,addTaskForceWorkGroup:new TaskForceWorkGroup.ViewModel,addCouncilCommitteeGGA:new councilCommitteeGGAViewModel},$.when(t(parseInt(n("gid"),0))).done(setTimeout(function(){ko.applyBindings(groupRegisterViewModel)},1e3)),groupRegisterViewModel.addGroupViewModel.errors=ko.validation.group(groupRegisterViewModel.addGroupViewModel),$.when(groupRegisterViewModel.addGroupViewModel.getData1(),groupRegisterViewModel.addGroupViewModel.getData2(),groupRegisterViewModel.addGroupViewModel.getDepartments(),groupRegisterViewModel.addGroupViewModel.getDataGroupTypes(),groupRegisterViewModel.addGroupViewModel.getDataLiaisons(),groupRegisterViewModel.addA4AStaffViewModel.getA4AStaffList(),groupRegisterViewModel.addTaskForceWorkGroup.gettaskRoles()).done()):(groupRegisterViewModel={addGroupViewModel:new Group,addA4AStaffViewModel:A4AStaffViewModel,UMSubscribeModel:UMSubscribe,addTaskForceWorkGroup:new TaskForceWorkGroup.ViewModel,addCouncilCommitteeGGA:new councilCommitteeGGAViewModel},ko.applyBindings(groupRegisterViewModel),groupRegisterViewModel.addGroupViewModel.errors=ko.validation.group(groupRegisterViewModel.addGroupViewModel),$.when(groupRegisterViewModel.addGroupViewModel.getData1(),groupRegisterViewModel.addGroupViewModel.getData2(),groupRegisterViewModel.addGroupViewModel.getDepartments(),groupRegisterViewModel.addGroupViewModel.getDataGroupTypes(),groupRegisterViewModel.addGroupViewModel.getDataLiaisons(),groupRegisterViewModel.addA4AStaffViewModel.getA4AStaffList(),groupRegisterViewModel.addTaskForceWorkGroup.gettaskRoles()).done())});