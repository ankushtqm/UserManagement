function clearalltimeouts(){for(var t=setTimeout(";"),n=0;n<t;n++)clearTimeout(n),alert(n)}function Group(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){var d=this,g;d.HiddenGroupId=ko.observable(n);d.GroupName=ko.observable(t);d.AppliesToSiteId=ko.observable(i);d.GroupTypeId=ko.observable(r);d.GroupTypeName=ko.observable();d.LyrisListName=ko.observable(u);d.LyrisShortDescription=ko.observable(f);d.GroupSiteUrl=ko.observable(e);d.ParentGroupId=ko.observable(h);d.Liaison1=ko.observable(a);d.Liaison2=ko.observable();d.ShowL2=ko.observable(!1);d.Mission=ko.observable(v);d.LyrisSendId=ko.observable();d.DepartmentId=ko.observable();d.rdoBounceReports=ko.observable("Off");d.InfoMessage=ko.observable();d.gId=ko.observable();d.edit=ko.observable(!1);g={groupemail:/^[a-z0-9_-]+$/i};d.step1Validation=ko.validatedObservable([d.GroupName.extend({required:{message:" Group Name is required."}}),d.LyrisListName.extend({required:{message:" Use only lower-case alphanumeric characters (a-z, 0-9), hyphens (-),or underscores ( _ ). Do not use spaces.​"},pattern:{message:" Use only lower-case alphanumeric characters (a-z, 0-9).​.",params:g.groupemail}}),d.LyrisListName.extend({required:{message:" List Name is required."}}),d.Liaison1.extend({required:{message:" Please choose a Liaison."}}),d.DepartmentId.extend({required:{message:" Please choose a Department."}}),d.LyrisSendId.extend({required:{message:"Please choose a Email Send Permissions."}})]);d.BounceReports=ko.computed(function(){return d.rdoBounceReports()==="On"?!0:!1});d.rdoGAB=ko.observable("Off");d.GAB=ko.computed(function(){return d.rdoGAB()==="On"?!0:!1});d.requestedTeamMembers=ko.observableArray(b);d.requestedSelectedMembers=ko.observableArray(k);d.ShowErr=ko.observable(!1);d.GroupName.subscribe(function(){d.removeErrors();$("#hdnGroupName").val(d.GroupName());d.LyrisShortDescription(d.GroupName())});d.LyrisListName.subscribe(function(){d.removeErrors()});d.removeErrors=function(){d.ShowErr(!1)};d.LyrisSends=ko.observableArray();d.getData1=function(){$.ajax({url:"/api/LyrisSend",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){var t={name:key,value:n[key]};d.LyrisSends.push(t)}},error:function(){}})};d.Dept=ko.observableArray();d.getDepartments=function(){$.ajax({url:"/api/GetDept",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){var t=JSON.parse(n);$.each(t,function(n,t){var i={name:t.DepartmentDetail,value:t.DepartmentId};d.Dept.push(i)})},error:function(){}})};d.ParentGroups=ko.observableArray();d.getData2=function(){$.ajax({url:"/api/getGroupNamesWithId",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){var t={name:key,value:n[key]};d.ParentGroups.push(t)}},error:function(){}})};d.GroupTypes=ko.observableArray();d.getDataGroupTypes=function(){$.ajax({url:"/api/getGroupType",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){var t={value:key,name:n[key]};d.GroupTypes.push(t)}},error:function(){}})};d.Liaisons=ko.observableArray();d.getDataLiaisons=function(){$.ajax({url:"/api/GetA4AStaffwTitle",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n)if(!(n===null||n==="undefined")){var t=n[key].split(":"),i={value:t[1],name:t[0]};d.Liaisons.push(i)}},error:function(){}})};d.AppliesToSiteIdValues=ko.observableArray([{id:"2",name:"Members"},{id:"1",name:"Fuels"},{id:"3",name:"Both"}]);d.ShowErr=ko.observable(!1);d.addGroup=function(){var n,i,t;if(d.InfoMessage(""),n=CKEDITOR.instances.inpMission,groupRegisterViewModel.addGroupViewModel.Mission(n.getData()),i=ko.validation.group(groupRegisterViewModel.addGroupViewModel,{deep:!0}),$(".overlay").show(),d.step1Validation.isValid())$(".overlay").show(),d.ShowErr(!1),t=ko.toJSON(this),$.ajax({url:"/api/group?isEdit="+d.edit(),type:"post",data:t,contentType:"application/json",success:function(){},error:function(n){$(".overlay").hide();$("#CrtGrpMessage").css("color","red");d.InfoMessage(n.responseText)}}).done(function(n){$(".overlay").hide();$("#CrtGrpMessage").css("color","green");d.edit(!0);d.InfoMessage("Group has been saved successfully");d.HiddenGroupId(n.GroupId);$("#hdnGroupId").val(n.GroupId);$("#hdnGroupName").val(d.GroupName());$("#Headtitle").html("Create New Group");$(".NoEdit").prop("disabled",!0).css("background-color","lightgrey");groupRegisterViewModel.addA4AStaffViewModel.gId(n.GroupId);groupRegisterViewModel.UMSubscribeModel.gId(n.GroupId);groupRegisterViewModel.addTaskForceWorkGroup.gId(n.GroupId);councilCommitteeViewModel.gId=n.GroupId;groupRegisterViewModel.addA4AStaffViewModel.hasBounceReports(n.BounceReports);enableForm();$("#hdnSaveGroupValue").val("1");var t=$('input[name="LyrisSends"]:checked').val();t!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveInformationalRoles").hide(),$("#DivSaveContactsRoles").hide(),$("#DivSaveCompanyRoles").hide(),$("#DivSaveCommitteeRoles").hide(),$("#DivSaveTaskGroupRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveInformationalRoles").show(),$("#DivSaveContactsRoles").show(),$("#DivSaveCompanyRoles").show(),$("#DivSaveCommitteeRoles").show(),$("#DivSaveTaskGroupRoles").show())});else return d.ShowErr(!0),d.step1Validation.errors.showAllMessages(),$(".overlay").hide(),!1};d.load=function(n){try{var t=JSON.parse(n.responseText);d.GroupName(t.GroupName);d.AppliesToSiteId(t.AppliesToSiteId);d.GroupTypeId(t.GroupTypeId);d.LyrisListName(t.LyrisListName);d.LyrisShortDescription(t.LyrisShortDescription);d.GroupSiteUrl(t.GroupSiteUrl);d.ParentGroupId(t.ParentGroupId);d.Liaison1(t.Liaison1UserId);d.Liaison2(t.Liaison2UserId);t.Liaison2UserId>0&&d.ShowL2(!0);d.Mission(t.Mission);d.LyrisSendId(""+t.LyrisSendId);d.DepartmentId(t.DepartmentId);$("#hdnchkRadioId").val(t.LyrisSendId);t.BounceReports?d.rdoBounceReports("On"):d.rdoBounceReports("Off");t.GAB?d.rdoGAB("On"):d.rdoGAB("Off");d.edit(!0);$(".NoEdit").prop("disabled",!0).css("background-color","lightgrey")}catch(i){alert("Error loading group data."+i.message)}}}function councilCommitteeViewModel(n){function i(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]}function o(n,t,i){$.ajax({url:n,type:"post",async:!1,contentType:"application/json",success:function(){$(".spnMessage").html("Removed "+i+" for "+t).css("color","green");setTimeout(function(){$(".spnMessage").html("")},6e3);undefined!==$("#hdnChairComp").val()&&$("#hdnChairComp").val()===t&&$("#hdnChairComp").val().replace(/\s/g,"").length>0&&(i==="Alternate"?$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled",!1):$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled",!1));undefined!==$("#hdnViceChairComp").val()&&$("#hdnViceChairComp").val()===t&&$("#hdnViceChairComp").val().replace(/\s/g,"").length>0&&(i==="Alternate"?$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled",!1):$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled",!1))},error:function(n){var r=eval("("+n.responseText+")");return typeof compPrimError=="undefined"?($(".spnMessage").html("Error in removing "+i+" for "+t+". Error: "+r.Message).css("color","red"),setTimeout(function(){$(".spnMessage").html("")},6e3)):$(event.target).parent().append("<span id='"+compPrimError+"' class='error'><br/><i class='fa fa-times-circle'>&nbsp;<\/i>"+r.Message+"<\/span>"),$(".overlay").hide(),!1}})}var r,u,f,e,t;self=this;self.Company=ko.observable(n&&n.Company||"1");self.errorPrimUser=ko.observable();self.errorAltUser=ko.observable();r=sessionStorage.getItem("Prim"+n.Company.replace(/\s/g,""));u=sessionStorage.getItem("Alt"+n.Company.replace(/\s/g,""));self.PrimUserValue=ko.observable(r);self.AltUserValue=ko.observable(u);self.PrimaryID=ko.observable("Prim"+n.Company.replace(/\s/g,""));self.AlternateID=ko.observable("Alt"+n.Company.replace(/\s/g,""));f=GetCompanyNamePrimary.get("Prim"+n.Company.replace(/\s/g,""));e=GetCompanyNameAlternate.get("Alt"+n.Company.replace(/\s/g,""));self.CheckStatusPrimary=ko.observable(f);self.CheckStatusAlternate=ko.observable(e);self.ChkPrimaryID=ko.observable("ChkPrim"+n.Company.replace(/\s/g,""));self.ChkAlternateID=ko.observable("ChkAlt"+n.Company.replace(/\s/g,""));DisablePrimary();t=$("#hdnGroupId").val()||parseInt(i("gid"));self.gId=ko.observable(t);self.errorMessage=ko.observable();t>0?$("#errorPrimUser").val(""):$("#errorPrimUser").val("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!");self.CompanyUsers=ko.observableArray();self.getCompanyUsers=function(t,i){var r=t.term;$.ajax({url:"/api/GetComapnyUsers/?CompanyName="+n.Company,type:"GET",cache:!1,data:t,dataType:"json",success:function(n){i($.map(n,function(n,t){return{label:t,text:n,value:""}}))}})};self.closeSelect=function(){};self.selectedValues=ko.observableArray();self.selectPrimary=function(r,u){var f,e,s,h,o;try{if($(".overlay").show(),f=n.Company.replace(/\s+/g,"")+"PrimError",e=$("#"+f),typeof e!="undefined"&&e.remove(),$("#DivMsgA4AStaffContainer").hide(),$("#DivCompanyMsg").show(),$("#DivCommitteeMsg").hide(),$("#DivInformationalContactMsg").hide(),$("#DivSaveInformationalContactMsg").hide(),$("#DivContactMsg").hide(),$("#DivSaveContactMsg").hide(),$("#DivTaskGroupMsg").hide(),$("#DivSaveTaskGroupMsg").hide(),t>0||(t=$("#hdnGroupId").val()||parseInt(i("gid"))),s=[{Name:u.item.label,UserId:u.item.text,Primary:!0,GroupId:t,CompanyName:n.Company,Type:"3"}],h=ko.utils.stringifyJson(s),$.ajax({url:"/api/UserGroup",type:"post",data:h,contentType:"application/json",success:function(){$(".spnMessage").html(u.item.label+" has been successfully added as Primary for "+n.Company).css("color","green");setTimeout(function(){$(".spnMessage").html("")},6e3);undefined!==$("#hdnChairComp").val()&&$("#hdnChairComp").val().replace(/\s/g,"").length>0&&n.Company===$("#hdnChairComp").val()&&$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnViceChairComp").val()&&$("#hdnViceChairComp").val().replace(/\s/g,"").length>0&&n.Company===$("#hdnViceChairComp").val()&&$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled","disabled")},error:function(t){var i=eval("("+t.responseText+")"),u=$(r.target).parent();return u.append("<div id='"+f+"' class='error'><br/><i class='fa fa-times-circle'>&nbsp;<\/i>"+i.Message),$("#Prim"+n.Company.replace(/\s+/g,"")).val(""),console.log("In Primary"+$("#Prim"+n.Company.replace(/\s+/g,"")).val()),$(".overlay").hide(),!1}}),o=$(this).val().indexOf("all"),o>-1&&o<1)return $(this).val(""),$(".overlay").hide(),!1;$(this).val(u.item.label)}catch(c){$(".overlay").hide()}$(".overlay").hide()};self.removePrimGroupUser=function(i,r){var e,u,f;$(".overlay").show();n.Company.length>0&&!isNaN(t)&&(e="/api/RemoveGrpUsrbyComp/?CompanyName="+n.Company+"&GroupId="+t+"&RoleId=1",o(e,n.Company,"Primary"),u=n.Company.replace(/\s+/g,"")+"PrimError",f=$("#"+u),typeof u!="undefined"&&typeof f!="undefined"&&f.remove(),$(r.target).prev().val(""));$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").show();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide()};self.removeAltGroupUser=function(i,r){var e,u,f;$(".overlay").show();n.Company.length>0&&!isNaN(t)&&(e="/api/RemoveGrpUsrbyComp/?CompanyName="+n.Company+"&GroupId="+t+"&RoleId=2",o(e,n.Company,"Alternate"),$(r.target).prev().val(""),u=n.Company.replace(/\s+/g,"")+"PrimAlt",f=$("#"+u),typeof u!="undefined"&&typeof f!="undefined"&&f.remove());$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").show();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide()};self.selectAlternate=function(r,u){var f,e,o,s;try{$(".overlay").show();f=n.Company.replace(/\s+/g,"")+"PrimAlt";e=$("#"+f);typeof e!="undefined"&&e.remove();t>0||(t=$("#hdnGroupId").val()||parseInt(i("gid")));$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").show();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();o=[{Name:u.item.label,UserId:u.item.text,Alternate:!0,GroupId:t,CompanyName:n.Company,Type:"3"}];s=ko.utils.stringifyJson(o);$.ajax({url:"/api/UserGroup",type:"post",data:s,contentType:"application/json",success:function(){$(".spnMessage").html(u.item.label+" has been successfully added as Alternate for "+n.Company).css("color","green");undefined!==$("#hdnChairComp").val()&&$("#hdnChairComp").val().replace(/\s/g,"").length>0&&n.Company===$("#hdnChairComp").val()&&$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnViceChairComp").val()&&$("#hdnViceChairComp").val().replace(/\s/g,"").length>0&&n.Company===$("#hdnViceChairComp").val()&&$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled","disabled")},error:function(t){var i=eval("("+t.responseText+")");return $(r.target).parent().append("<div id='"+f+"' class='error'><br/><i class='fa fa-times-circle'>&nbsp;<\/i>"+i.Message),$("#Alt"+n.Company.replace(/\s+/g,"")).val(""),console.log("In Alternate"+$("#Prim"+n.Company.replace(/\s+/g,"")).val()),$(".overlay").hide(),!1}})}catch(h){$(".overlay").hide()}$(".overlay").hide()};this.selectCompanyNamePrimary=function(i,r){n.Company.length>0&&!isNaN(t)&&CompanyNamePrimary.set(n.Company,r.target.checked)};this.selectCompanyNameAlternate=function(i,r){n.Company.length>0&&!isNaN(t)&&CompanyNameAlternate.set(n.Company,r.target.checked)}}function DisablePrimary(){try{$("#z-tab3").find("input, button").prop("disabled",!0);var n=$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,""));undefined!==$("#hdnViceChairComp").val().replace(/\s/g,"")&&undefined!==$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val()&&$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnViceChairComp").val().replace(/\s/g,"")&&undefined!==$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val()&&$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnChairComp").val().replace(/\s/g,"")&&undefined!==$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).val()&&$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnChairComp").val().replace(/\s/g,"")&&undefined!==$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).val()&&$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled","disabled")}catch(t){}}function getManagedGroupCount(n){$.getJSON("/api/getManageGroupCount?groupId="+n,function(n){manageGroup=n}).done(function(){$.getJSON("/api/GetIsCurrentUserAdmin",function(n){isAdmin(n)}).done(function(n){n||manageGroup<=1&&shouldShowDelete(!1)})})}function disableForm(){$("#z-tab2, #z-tab3, #z-tab4, #z-tab5, #z-tab6, #z-tab7").find("input, button, submit, textarea, select").prop("disabled",!0);$("#z-tab2, #z-tab3, #z-tab4, #z-tab5, #z-tab6, #z-tab7").find("button, a").hide()}function enableForm(){$("#z-tab2, #z-tab3, #z-tab4, #z-tab5, #z-tab6, #z-tab7").find("input, button, submit, textarea, select").prop("disabled",!1);$("#z-tab2, #z-tab3, #z-tab4, #z-tab5, #z-tab6, #z-tab7").find("button, a").show();$(".btndelete").css("display","inline-block !important");$("#z-tab3").find("input").prop("disabled",!1)}function handleClick(n){$("#hdnSaveGroupValue").val()=="1"?(n.value!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveInformationalRoles").hide(),$("#DivSaveContactsRoles").hide(),$("#DivSaveCompanyRoles").hide(),$("#DivSaveCommitteeRoles").hide(),$("#DivSaveTaskGroupRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveInformationalRoles").show(),$("#DivSaveContactsRoles").show(),$("#DivSaveCompanyRoles").show(),$("#DivSaveCommitteeRoles").show(),$("#DivSaveTaskGroupRoles").show()),$("#hdnchkRadioId").val(n.value)):self.gId()>0&&self.gId()!=null&&(n.value!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveInformationalRoles").hide(),$("#DivSaveContactsRoles").hide(),$("#DivSaveCompanyRoles").hide(),$("#DivSaveCommitteeRoles").hide(),$("#DivSaveTaskGroupRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveInformationalRoles").show(),$("#DivSaveContactsRoles").show(),$("#DivSaveCompanyRoles").show(),$("#DivSaveCommitteeRoles").show(),$("#DivSaveTaskGroupRoles").show()),$("#hdnchkRadioId").val(n.value))}function saveA4ARoles(){saveA4ACompanyNamePrimaryRoles();saveA4ACompanyNameAlternateRoles();saveA4AStaffRoles();saveA4AGroupUserRoles();$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").show();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();$("#hdnSaveRoleValues").val()=="1"?$(".spnMessage").html("Council/Committee Contacts changes saved successfully").css("color","green"):$("#hdnSaveRoleValues").val()=="0"?$(".spnMessage").text("Error updating the records:"):$(".spnMessage").html("Council/Committee Contacts changes saved successfully").css("color","green");setTimeout(function(){$(".spnMessage").text("")},1e4)}function saveA4ACompanyNamePrimaryRoles(){for(var n of CompanyNamePrimary.keys())A4AModelCompanyNamePrimary.push({groupId:self.gId(),CompanyName:n,value:CompanyNamePrimary.get(n),RoleId:"1"});let t=JSON.stringify(A4AModelCompanyNamePrimary);$.ajax({url:"/api/SaveCouncilCommitteeCompanyDtl",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$("#hdnSaveRoleValues").val("1")},error:function(n){$("#hdnSaveRoleValues").val("0");msg=n.responseText}});CompanyNamePrimary=new Map;A4AModelCompanyNamePrimary=[]}function saveA4ACompanyNameAlternateRoles(){for(var n of CompanyNameAlternate.keys())A4AModelCompanyNameAlternate.push({groupId:self.gId(),CompanyName:n,value:CompanyNameAlternate.get(n),RoleId:"2"});let t=JSON.stringify(A4AModelCompanyNameAlternate);$.ajax({url:"/api/SaveCouncilCommitteeCompanyDtl",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$("#hdnSaveRoleValues").val("1")},error:function(n){$("#hdnSaveRoleValues").val("0");msg=n.responseText}});CompanyNameAlternate=new Map;A4AModelCompanyNameAlternate=[]}function saveA4AStaffRoles(){for(var n of ChkStaff.keys())A4AModelChkStaff.push({groupId:self.gId(),UserId:$("#hdnChkStaffUserId").val(),value:ChkStaff.get(n),RoleId:"3"});let t=JSON.stringify(A4AModelChkStaff);$.ajax({url:"/api/SaveCouncilCommitteeStaffDtl",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$("#hdnSaveRoleValues").val("1")},error:function(n){$("#hdnSaveRoleValues").val("0");msg=n.responseText}});ChkStaff=new Map;A4AModelChkStaff=[]}function saveA4AGroupUserRoles(){for(var n of ChkGroupUser.keys())A4AModelChkGroupUser.push({groupId:self.gId(),UserId:$("#hdnChkGroupUserId").val(),value:ChkGroupUser.get(n),RoleId:"4"});let t=JSON.stringify(A4AModelChkGroupUser);$.ajax({url:"/api/SaveCouncilCommitteeStaffDtl",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$("#hdnSaveRoleValues").val("1")},error:function(n){$("#hdnSaveRoleValues").val("0");msg=n.responseText}});ChkGroupUser=new Map;A4AModelChkGroupUser=[]}function EmailAdmin(n){SendEmailAdmin.set(n.value,n.checked)}function saveA4ACommitteeRoles(){saveA4ACommitteeCompanyRoles();saveA4ACommitteeStaffRoles();saveA4ACommitteeGroupUserRoles();$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").show();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();$("#hdnSaveRoleValues").val()=="1"?$(".spnMessage").html("Council/Committee Unlimited Alternates changes saved successfully").css("color","green"):$("#hdnSaveRoleValues").val()=="0"?$(".spnMessage").text("Error updating the records:"):$(".spnMessage").html("Council/Committee Unlimited Alternates changes saved successfully").css("color","green");setTimeout(function(){$(".spnMessage").text("")},1e4)}function saveA4ACommitteeCompanyRoles(){for(var n of SendEmailAdmin.keys())A4AModelEmailAdmin.push({groupId:self.gId(),UserId:n,value:SendEmailAdmin.get(n)});let t=JSON.stringify(A4AModelEmailAdmin);$.ajax({url:"/api/savecommitteeroles",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$("#hdnSaveRoleValues").val("1")},error:function(){$("#hdnSaveRoleValues").val("0")}});SendEmailAdmin=new Map;A4AModelEmailAdmin=[];A4AModelEmailAdmin=[];setTimeout(function(){$(".spnMessage").text("")},1e4)}function saveA4ACommitteeStaffRoles(){for(var n of ChkStaffCommittee.keys())A4AModelChkStaffCommittee.push({groupId:self.gId(),UserId:$("#hdnChkStaffUserId").val(),value:ChkStaffCommittee.get(n),RoleId:"3"});let t=JSON.stringify(A4AModelChkStaffCommittee);$.ajax({url:"/api/SaveCouncilCommitteeStaffDtl",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$("#hdnSaveRoleValues").val("1")},error:function(n){$("#hdnSaveRoleValues").val("0");msg=n.responseText}});ChkStaffCommittee=new Map;A4AModelChkStaffCommittee=[]}function saveA4ACommitteeGroupUserRoles(){for(var n of ChkGroupUserCommittee.keys())A4AModelChkGroupUserCommittee.push({groupId:self.gId(),UserId:$("#hdnChkGroupUserId").val(),value:ChkGroupUserCommittee.get(n),RoleId:"4"});let t=JSON.stringify(A4AModelChkGroupUserCommittee);$.ajax({url:"/api/SaveCouncilCommitteeStaffDtl",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$("#hdnSaveRoleValues").val("1")},error:function(n){$("#hdnSaveRoleValues").val("0");msg=n.responseText}});ChkGroupUserCommittee=new Map;A4AModelChkGroupUserCommittee=[]}function chkInformationalRoles(n){chkInformationalUser.set(n.value,n.checked)}function saveA4AInformationalRoles(){for(var n of chkInformationalUser.keys())A4AModelInformationalUser.push({groupId:self.gId(),UserId:n,value:chkInformationalUser.get(n)});$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").show();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();let t=JSON.stringify(A4AModelInformationalUser);$.ajax({url:"/api/savecommitteeroles",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$(".spnMessage").html("Informational Contact changes saved successfully").css("color","green")},error:function(n){$(".spnMessage").text("Error updating the records:"+n.responseText)}});chkInformationalUser=new Map;A4AModelInformationalUser=[];setTimeout(function(){$(".spnMessage").text("")},1e4)}function chkContactRoles(n){chkContactUser.set(n.value,n.checked)}function saveA4AContactsRoles(){for(var n of chkContactUser.keys())A4AModelContactUser.push({groupId:self.gId(),UserId:n,value:chkContactUser.get(n)});$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").show();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();let t=JSON.stringify(A4AModelContactUser);$.ajax({url:"/api/savecommitteeroles",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$(".spnMessage").html("Contact changes saved successfully").css("color","green")},error:function(n){$(".spnMessage").text("Error updating the records:"+n.responseText)}});chkContactUser=new Map;A4AModelContactUser=[];setTimeout(function(){$(".spnMessage").text("")},1e4)}function chkTaskGroupRoles(n){chkTaskGroupUser.set(n.value,n.checked)}function saveA4ATaskGroupRoles(){for(var n of chkTaskGroupUser.keys())A4AModelTaskGroupUser.push({groupId:self.gId(),UserId:n,value:chkTaskGroupUser.get(n)});$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").show();let t=JSON.stringify(A4AModelTaskGroupUser);$.ajax({url:"/api/savecommitteeroles",type:"post",data:t,contentType:"application/json",dataType:"Json",success:function(){$(".spnMessage").html("Task Force changes saved successfully").css("color","green")},error:function(n){$(".spnMessage").text("Error updating the records:"+n.responseText)}});chkTaskGroupUser=new Map;A4AModelTaskGroupUser=[];setTimeout(function(){$(".spnMessage").text("")},1e4)}var SendEmailAdmin=new Map,A4AModelEmailAdmin=[],CompanyNamePrimary=new Map,A4AModelCompanyNamePrimary=[],GetCompanyNamePrimary=new Map,CompanyNameAlternate=new Map,A4AModelCompanyNameAlternate=[],GetCompanyNameAlternate=new Map,ChkStaff=new Map,A4AModelChkStaff=[],ChkGroupUser=new Map,A4AModelChkGroupUser=[],ChkStaffCommittee=new Map,A4AModelChkStaffCommittee=[],ChkGroupUserCommittee=new Map,A4AModelChkGroupUserCommittee=[],chkInformationalUser=new Map,A4AModelInformationalUser=[],chkContactUser=new Map,A4AModelContactUser=[],CheckStatusStaff=ko.observable(!1),CheckStatusGroupUser=ko.observable(!1),CheckStatusCommitteeStaff=ko.observable(!1),CheckStatusCommitteeGroupUser=ko.observable(!1),chkTaskGroupUser=new Map,A4AModelTaskGroupUser=[],shouldShowDelete=ko.observable(!0),isAdmin=ko.observable(!0),groupRegisterViewModel,A4AStaffModel=function(n){var t=this;t.selected=ko.observable();t.A4AStaff=ko.observableArray(n);t.A4AStaffSelected=ko.observable();t.gId=ko.observable();t.hasBounceReports=ko.observable(!1);t.UMContacts=ko.observableArray();t.InfoMessage=ko.observable();t.ErrorMessage=ko.observable();t.GroupName=ko.observable();t.isDistribution=ko.observable(!1);t.edit=ko.observable(!1);t.A4AStaffList=ko.observableArray();t.getA4AStaffList=function(){$.ajax({url:"/api/GetA4AStaffwTitle",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n)if(!(n===null||n==="undefined")){var i=n[key].split(":"),r={value:i[1],name:i[0]};t.A4AStaffList.push(r)}},error:function(){}})};t.setChosen=function(){ko.bindingHandlers.chosen={init:function(n){$(n).addClass("chzn-select");$(n).chosen()},update:function(n){$(n).trigger("liszt:updated")}}};t.selected.subscribe(function(n){var i,r;if(isNaN(t.gId()))t.ErrorMessage("No Group ID exists!"),setTimeout(function(){t.ErrorMessage("")},6e3);else for(i in n)r=ko.utils.arrayFirst(t.A4AStaff(),function(t){return n[i].value==t.UserId}),r?(t.ErrorMessage("User"+n[i].name+" already exists!"),setTimeout(function(){t.ErrorMessage("")},6e3)):(t.A4AStaff.push({GroupId:t.gId(),UserId:n[i].value,Name:n[i].name,ManageGroup:!1,EmailAdmin:!1,BounceReports:!1,StaffSubscribe:!1,Alerts:!1,hasBounceReports:t.hasBounceReports()}),$("#z-tab2").find("a").show(),$("#z-tab2").find("input").prop("disabled",!1),t.gId()>0&&t.gId()!=null&&($("#hdnchkRadioId").val()!="1"?$("input[name='EmailAdmin']").prop("disabled",!0):$("input[name='EmailAdmin']").prop("disabled",!1)))});t.removeA4AStaff=function(n){$(".overlay").hide();var u=$("#hdnGroupTypeId").val(),r="/api/deletea4ausergroups?GroupId="+n.GroupId+"&UserId="+n.UserId+"&IsA4AStaff=true",i=ko.utils.stringifyJson(n);i="["+i+"]";$.ajax({url:r,type:"post",contentType:"application/json",success:function(){t.A4AStaff.remove(n);getManagedGroupCount(t.A4AStaff()[0].GroupId);t.InfoMessage("A4A staff removed successfully!");setTimeout(function(){t.InfoMessage("")},6e3)},error:function(n){return $(".overlay").hide(),t.ErrorMessage("Error:"+n.responseText),setTimeout(function(){t.ErrorMessage("")},15e3),!1}});$(".overlay").hide()};t.removeUMContacts=function(n){t.A4AStaff.remove(n)};t.save=function(){var r,i,n;for($(".overlay").hide(),r=ko.utils.stringifyJson(t.A4AStaff),i=!0,n=0;n<t.A4AStaff().length;n++){var h=t.A4AStaff()[n].GroupId,u=t.A4AStaff()[n].Name,f=t.A4AStaff()[n].ManageGroup,e=t.A4AStaff()[n].EmailAdmin,o=t.A4AStaff()[n].BounceReports,s=t.A4AStaff()[n].StaffSubscribe;if(i=f||e||o||s?!0:!1,!i){t.ErrorMessage("All staff members in this list should have at least one role. Please choose a role for staff member - "+u+" before saving!");setTimeout(function(){t.ErrorMessage("")},1e4);$(".overlay").hide();return}}$.ajax({url:"/api/A4AUserGroup/?IsStaff=true&IsGGA=false",type:"post",data:r,contentType:"application/json",success:function(){t.InfoMessage("A4A Staff changes saved successfully");getManagedGroupCount(t.A4AStaff()[0].GroupId);setTimeout(function(){t.InfoMessage("")},6e3)},error:function(n){return t.ErrorMessage("Error:"+n.responseText),$(".overlay").hide(),setTimeout(function(){t.ErrorMessage("")},1e4),!1}}).done(function(){$(".overlay").hide()})};t.load=function(){var n="/api/geta4ausergroups/?GroupId="+t.gId()+"&IsA4AStaff=true";$.ajax({url:n,type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(i=0;i<n.length;i++)t.A4AStaff.push({GroupId:n[i].GroupId,UserId:n[i].UserId,Name:n[i].UserName,ManageGroup:n[i].ManageGroup,EmailAdmin:n[i].EmailAdmin,BounceReports:n[i].BounceReports,StaffSubscribe:n[i].StaffSubscribe,Alerts:n[i].Alerts,hasBounceReports:t.hasBounceReports()})},error:function(n){t.InfoMessage("Exception in Get Liaisons:"+n.responseText);setTimeout(function(){t.InfoMessage("")},1e4)}})}},AutoCompleteExample,TaskForceWorkGroup,CommitteePrimAlt,councilCommitteeGGAViewModel,A4AStaffViewModel,UMSubscribe;ko.bindingHandlers.ko_autocomplete={init:function(n,t){$(n).autocomplete(t())},update:function(n,t){$(n).autocomplete("option","source",t().source)}},function(n){var t=function(){function n(){this.selectedValue=ko.observable();this.selectedValuesNW=ko.observableArray()}return n.prototype.gId=ko.observable(0),n.prototype.errorMessage=ko.observable(),n.prototype.InfoMessage=ko.observable(),n.prototype.edit=ko.observable(!1),n.prototype.clearSubscribertxt=function(){try{$(".acSubInfoUser").val("")}catch(n){alert(n)}},n.prototype.SorI=0,n.prototype.getLanguages=function(n,t){$(".overlay").show();var r=$("#hdnGroupTypeId").val(),i="";i=$("#hdnGroupTypeId").val()?"/api/GetAllContacts/?grouptype="+r:"/api/GetAllContacts/";$.ajax({url:i,type:"GET",cache:!1,data:n,dataType:"json",success:function(n){t($.map(n,function(n,t){return{label:t,text:n,value:""}}))}});$(".overlay").hide()},n.prototype.selectedValues=ko.observableArray(),n.prototype.selectLanguage=function(t,i){var f,c;try{$(".overlay").show();f=0;f=$("#hdnGroupId").val();f>0||n.prototype.gId()>0?n.prototype.errorMessage(""):(n.prototype.errorMessage("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!"),setTimeout(function(){n.prototype.errorMessage("")},6e3));var s="",e,o,r=i.item.label,h=r.indexOf("("),u=r.substring(h+1).replace(")",""),l=r.replace(r.substring(h),"");if(+$("#hdnSubscribeInformational").val()==1)s="Participant",e=[{Name:r,UserId:i.item.text,Participant:!0,GroupId:n.prototype.gId(),CompanyName:u,CheckStatus:!1,Type:"4"}],o={Name:r,UserId:i.item.text,Participant:!0,GroupId:n.prototype.gId(),CompanyName:u,CheckStatus:!1,Type:"4"};else if(+$("#hdnSubscribeInformational").val()==2)s="Informational",e=[{Name:r,UserId:i.item.text,Informational:!0,GroupId:n.prototype.gId(),CompanyName:u,CheckStatus:!1,Type:"4"}],o={Name:r,UserId:i.item.text,Informational:!0,GroupId:n.prototype.gId(),CompanyName:u,CheckStatus:!1,Type:"4"};else{n.prototype.errorMessage("Subscription group type is not selected, Contact IT for help!");setTimeout(function(){n.prototype.errorMessage("")},6e3);return}c=ko.utils.stringifyJson(e);$.ajax({url:"/api/UserGroup",type:"post",data:c,async:!1,contentType:"application/json",success:function(){n.prototype.selectedValues.push(o);n.prototype.InfoMessage("User "+l+" has been successfully added!");setTimeout(function(){n.prototype.InfoMessage("");$("#z-tab4").find("a").show();$("#hdnchkRadioId").val()!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveInformationalRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveInformationalRoles").show())},1e3)},error:function(t){try{n.prototype.errorMessage("Error in adding user to the group:"+t.responseText);setTimeout(function(){n.prototype.errorMessage("")},15e3)}catch(i){alert("Error in adding user to group:"+t.responseText)}}}).done(function(){})}catch(a){$(".overlay").hide()}return setTimeout(function(){$(".overlay").hide()},1e3),""},n.prototype.selectChair=function(t,i){var f,r,u,e,o;try{if($(".overlay").show(),f=0,n.prototype.errorMessage=ko.observable(),f=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId(),$("#DivMsgA4AStaffContainer").hide(),$("#DivCompanyMsg").show(),$("#DivCommitteeMsg").hide(),$("#DivInformationalContactMsg").hide(),$("#DivSaveInformationalContactMsg").hide(),$("#DivContactMsg").hide(),$("#DivSaveContactMsg").hide(),$("#DivTaskGroupMsg").hide(),$("#DivSaveTaskGroupMsg").hide(),r="",i.item.label){r=i.item.label.trim().slice(i.item.label.lastIndexOf("(")+1,-1);$("#hdnChairComp").val(r);u=$("#Prim"+r.replace(/\s/g,""));try{if(u!==null&&u.val().length>0&&$("#hdnGroupTypeId").val()!=9&&$("#hdnGroupTypeId").val()!=10&&$("#hdnGroupTypeId").val()!=1&&$("#hdnGroupTypeId").val()!=2)return $(".spnMessage").text("You already have a primary representative for "+r+".  Select another company chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").text("")},6e3),$("#GroupChairGGA").val(""),$("#GroupChair").val(""),$("#hdnChairComp").val(""),$(".overlay").hide(),!1;if($("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0)return $(".spnMessage").html("You already have a primary representative and alternate representative for "+r+".  Select another company chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").html("")},6e3),$("#GroupChair").val(""),$("#hdnChairComp").val(""),$(".overlay").hide(),!1}catch(s){$(".overlay").hide()}}if(!(r.length>0))return $(".spnMessage").text("No company name found for Chair. So the selection could not be completed"),$(".overlay").hide(),!1;e=[{Name:i.item.label,UserId:i.item.text,Chair:!0,GroupId:n.prototype.gId(),CompanyName:r,Type:"3"}];o=ko.utils.stringifyJson(e);$("#hdnChkStaffUserId").val(i.item.text);$.ajax({url:"/api/UserGroup",type:"post",async:!1,data:o,contentType:"application/json",success:function(){$(".spnMessage").html(i.item.label+"has been successfully saved as Chair!!").css("color","green");setTimeout(function(){$(".spnMessage").html("")},6e3);n.prototype.DisablePrimBox()},error:function(n){$(".spnMessage").html("Error in saving Group Chair"+n.responseText).css("color","red");i.item.value="";$("#hdnViceChairComp").val().indexOf($("#hdnChairComp").val())<0&&($("#Prim"+r.replace(/\s/g,"")).prop("disabled",!1),$("#Alt"+r.replace(/\s/g,"")).prop("disabled",!1));$("#hdnChairComp").val("")}}).done(function(){$(".overlay").hide()})}catch(s){$(".overlay").hide()}$(".overlay").hide()},n.prototype.selectViceChair=function(t,i){var f,r,u,e,o;try{if($(".overlay").show(),f=0,f=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId(),n.prototype.errorMessage=ko.observable(),r="",$("#DivMsgA4AStaffContainer").hide(),$("#DivCompanyMsg").show(),$("#DivCommitteeMsg").hide(),$("#DivInformationalContactMsg").hide(),$("#DivSaveInformationalContactMsg").hide(),$("#DivContactMsg").hide(),$("#DivSaveContactMsg").hide(),$("#DivTaskGroupMsg").hide(),$("#DivSaveTaskGroupMsg").hide(),i.item.label){r=i.item.label.trim().slice(i.item.label.lastIndexOf("(")+1,-1);$("#hdnViceChairComp").val(r);try{if(u=$("#Prim"+r.replace(/\s/g,"")),u!==null&&u.val().length>0&&$("#hdnGroupTypeId").val()!=9&&$("#hdnGroupTypeId").val()!=10&&$("#hdnGroupTypeId").val()!=1&&$("#hdnGroupTypeId").val()!=2)return $(".spnMessage").html("You already have a primary representative for "+r+".  Select another company vice chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").html("")},6e3),$("#GroupViceChairGGA").val(""),$("#hdnViceChairComp").val(""),$(".overlay").hide(),!1;if($("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0)return $(".spnMessage").html("You already have a primary representative and alternate representative for "+r+".  Select another company vice chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").html("")},6e3),$("#GroupViceChair").val(""),$("#hdnViceChairComp").val(""),$(".overlay").hide(),!1}catch(s){}}if(!(r.length>0)){$(".spnMessage").html("No company name found for Vice Chair. So the selection could not be completed");setTimeout(function(){$(".spnMessage").html("")},6e3);return}$("#hdnChkGroupUserId").val(i.item.text);e=[{Name:i.item.label,UserId:i.item.text,ViceChair:!0,GroupId:n.prototype.gId(),CompanyName:r,Type:"3"}];o=ko.utils.stringifyJson(e);$.ajax({url:"/api/UserGroup",type:"post",async:!1,data:o,contentType:"application/json",success:function(){$(".spnMessage").html(i.item.label+"has been successfully saved as Vice Chair!!").css("color","green");setTimeout(function(){$(".spnMessage").html("")},6e3);n.prototype.DisablePrimBox();$("#hdnPrimary").val()},error:function(n){$(".spnMessage").html("Error in saving Group Vice Chair"+n.responseText).css("color","red");i.item.value="";$("#hdnChairComp").val().indexOf($("#hdnViceChairComp").val())<0&&($("#Prim"+r.replace(/\s/g,"")).prop("disabled",!1),$("#Alt"+r.replace(/\s/g,"")).prop("disabled",!1));$("#hdnViceChairComp").val("")}}).done(function(){$(".overlay").hide()})}catch(s){$(".overlay").hide()}$(".overlay").hide()},n.prototype.addGroup=function(){try{$(".overlay").show();var t=ko.utils.stringifyJson(n.prototype.selectedValues);$.ajax({url:"/api/UserGroup",type:"post",async:!1,data:t,contentType:"application/json",success:function(){n.prototype.InfoMessage("User added to the Group Successfully!");setTimeout(function(){n.prototype.InfoMessage("")},3e3)},error:function(t){var i=eval("("+t.responseText+")");return n.prototype.errorMessage("Error in Adding users. "+t.responseText),$(".overlay").hide(),!1}})}catch(i){$(".overlay").hide()}$(".overlay").hide()},n.prototype.removeUMInfoContacts=function(t){try{$(".overlay").show();$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").show();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();var r=$("#hdnGroupTypeId").val(),i=ko.utils.stringifyJson(t);i="["+i+"]";$.ajax({url:"/api/RemoveGroupUser?IsA4AStaff=0&GroupTypeId="+r,type:"post",async:!1,data:i,contentType:"application/json",success:function(){n.prototype.InfoMessage("User removed from the group successfully!");setTimeout(function(){n.prototype.InfoMessage("")},3e3);n.prototype.selectedValues.remove(t)},error:function(t,i,r){return n.prototype.errorMessage("Error in removing user"+r),$(".overlay").hide(),!1}})}catch(u){$(".overlay").hide()}setTimeout(function(){$(".overlay").hide()},4e3)},n.prototype.removeUMContacts=function(t){try{$(".overlay").show();$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").show();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();var r=$("#hdnGroupTypeId").val(),i=ko.utils.stringifyJson(t);i="["+i+"]";$.ajax({url:"/api/RemoveGroupUser?IsA4AStaff=0&GroupTypeId="+r,type:"post",async:!1,data:i,contentType:"application/json",success:function(){n.prototype.InfoMessage("User removed from the group successfully!");setTimeout(function(){n.prototype.InfoMessage("")},3e3);n.prototype.selectedValues.remove(t)},error:function(t,i,r){return n.prototype.errorMessage("Error in removing user"+r),$(".overlay").hide(),!1}})}catch(u){$(".overlay").hide()}setTimeout(function(){$(".overlay").hide()},4e3)},n.prototype.load=function(t,r){var u="/api/GetGroupUserlineItem/?GroupId="+t+"&RoleId="+r;$.ajax({url:u,type:"GET",contentType:"application/json",success:function(t){var u=JSON.parse(t),f,r;for(i=0;i<u.length;i++)f="",r={},r.Name=u[i].UserName,r.CompanyName=u[i].CompanyName,r.UserId=u[i].UserId,r[u[i].Role.trim()]=!0,r.GroupId=u[i].GroupId,r.CheckStatus=u[i].CheckStatus,n.prototype.selectedValues.push(r)},error:function(t){n.prototype.errorMessage(t.responseText)}})},n.prototype.removeChairGroupUser=function(t,i){try{$(".overlay").show();$("#hdnChairComp").val("");$("#GroupChair").val("");$("#GroupChairGGA").val("");$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").show();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();var r="/api/RemoveGrpUsrbyRole/?GroupId="+gId+"&RoleId=3",u=n.prototype.RemoveGroupUser(r,"","Chair");$(i.target).prev().val("")}catch(f){$(".overlay").hide()}$(".overlay").hide()},n.prototype.removeViceChairGroupUser=function(t,i){try{$(".overlay").show();$("#hdnViceChairComp").val("");$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").show();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();$("#GroupViceChair").val("");$("#GroupViceChairGGA").val("");var r="/api/RemoveGrpUsrbyRole/?GroupId="+gId+"&RoleId=4",u=n.prototype.RemoveGroupUser(r,"","Vice Chair");$(i.target).prev().val("")}catch(f){$(".overlay").hide()}$(".overlay").hide()},n.prototype.removeCommitteeChairGroupUser=function(t,i){try{$(".overlay").show();$("#hdnChairComp").val("");$("#GroupChair").val("");$("#GroupChairGGA").val("");$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").show();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();var r="/api/RemoveGrpUsrbyRole/?GroupId="+gId+"&RoleId=3",u=n.prototype.RemoveGroupUser(r,"","Chair");$(i.target).prev().val("")}catch(f){$(".overlay").hide()}$(".overlay").hide()},n.prototype.removeCommitteeViceChairGroupUser=function(t,i){try{$(".overlay").show();$("#hdnViceChairComp").val("");$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").show();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").hide();$("#DivSaveTaskGroupMsg").hide();gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();$("#GroupViceChair").val("");$("#GroupViceChairGGA").val("");var r="/api/RemoveGrpUsrbyRole/?GroupId="+gId+"&RoleId=4",u=n.prototype.RemoveGroupUser(r,"","Vice Chair");$(i.target).prev().val("")}catch(f){$(".overlay").hide()}$(".overlay").hide()},n.prototype.DisablePrimBox=function(){try{$("[id*=Prim]").prop("disabled",!1);$("[id*=Alt]").prop("disabled",!1);undefined!==$("#hdnViceChairComp").val().replace(/\s/g,"")&&undefined!==$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val()&&$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnViceChairComp").val().replace(/\s/g,"")&&undefined!==$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val()&&$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnChairComp").val().replace(/\s/g,"")&&undefined!==$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).val()&&$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled","disabled");undefined!==$("#hdnChairComp").val().replace(/\s/g,"")&&undefined!==$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).val()&&$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).attr("disabled","disabled")}catch(n){}},n.prototype.RemoveGroupUser=function(t){$.ajax({url:t,type:"post",async:!1,contentType:"application/json",success:function(){return n.prototype.DisablePrimBox(),$(".spnMessage").text("User removed successfully!!").css("color","green"),setTimeout(function(){$(".spnMessage").text("")},15e3),!0},error:function(n){var t=eval("("+n.responseText+")");return $(".spnMessage").text("Error removing user:"+n.responseText).css("color","red"),setTimeout(function(){$(".spnMessage").text("")},15e3),$(event.target).parent().append("<span id='"+compPrimError+"' class='text-danger'><br/><i class='fa fa-times-circle'>&nbsp;<\/i>"+t.Message+"<\/span>"),!1}})},n.prototype.selectchkStaff=function(t,i){gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();ChkStaff.set(gId,i.target.checked)},n.prototype.selectchkGroupUser=function(t,i){gId=isNaN(n.prototype.gId())?$("#hdnGroupId").val():n.prototype.gId();ChkGroupUser.set(gId,i.target.checked)},n}();n.ViewModel=t}(AutoCompleteExample||(AutoCompleteExample={})),function(n){var t=function(){function n(){this.selectedValue=ko.observable();this.selectedTskForUserNW=ko.observableArray()}return n.prototype.gId=ko.observable(0),n.prototype.edit=ko.observable(!1),n.prototype.errorMessage=ko.observable(),n.prototype.Roles=ko.observableArray([{id:"0",name:"Choose Role"},{id:"20",name:"Administrator"},{id:"3",name:"Chair"},{id:"15",name:"Co Chair"},{id:"16",name:"FAA Chair"},{id:"17",name:"FAA Co Chair"},{id:"19",name:"Observer"},{id:"8",name:"Secretary"},{id:"6",name:"Spokesperson"},{id:"12",name:"Participant"},{id:"18",name:"Team Leader"},{id:"4",name:"Vice Chair"}]),n.prototype.role=ko.observable(),n.prototype.taskRoles=ko.observableArray(),n.prototype.InfoMessage=ko.observable(),n.prototype.gettaskRoles=function(){$.ajax({url:"/api/GetCommitteRolesbyGType",type:"GET",datatype:"json",processData:!1,contentType:"application/json; charset=utf-8",success:function(n){for(key in n){var t={name:key,value:n[key]};self.taskRoles.push(t)}},error:function(){}})},n.prototype.clearTaskGroupUser=function(){$("#tskGrpUser").val("")},n.prototype.GetAllUsers=function(t,i){n.prototype.errorMessage();var f=t.term,u=$("#hdnGroupTypeId").val(),r="";r=$("#hdnGroupTypeId").val()?"/api/GetAllContacts/?grouptype="+u:"/api/GetAllContacts/";$.ajax({url:r,type:"GET",cache:!1,data:t,dataType:"json",success:function(n){i($.map(n,function(n,t){return{label:t,text:n,value:""}}))}})},n.prototype.selectedTskForUser=ko.observableArray(),n.prototype.selectTskFrGroupUser=function(t,i){var o,u,s,e;try{if($(".overlay").show(),o=0,o=$("#hdnGroupId").val(),n.prototype.errorMessage=ko.observable(),isNaN(o)&&isNaN(n.prototype.gId()))$("#tskErrorMsg").css("color","red"),n.prototype.errorMessage("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!");else if(u=n.prototype.role(),s=$("#inpGroupRole option[value='"+u+"']").text(),typeof u=="undefined"||n.prototype.gId()<1||u==="0")n.prototype.errorMessage("Role or GroupId Missing. The user cannot be added to the group.");else{var r={},f=i.item.label,h=f.indexOf("("),c=f.substring(h+1).replace(")",""),l=f.replace(f.substring(h),"");r.Name=l;r.UserId=i.item.text;r.role=s;r[s.replace(/\s/g,"").trim()]=!0;r.CompanyName=c;r.GroupId=n.prototype.gId();r.CheckStatus=!1;e=ko.utils.stringifyJson(r);e="["+e+"]";$.ajax({url:"/api/UserGroup",type:"post",data:e,contentType:"application/json",success:function(){$("#tskErrorMsg").css("color","Green");$("#tskErrorMsg").html(i.item.label+"has been added to the group");setTimeout(function(){$("#tskErrorMsg").html("")},6e3);n.prototype.selectedTskForUser.push(r);$("#hdnchkRadioId").val()!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveTaskGroupRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveTaskGroupRoles").show());$("#z-tab6").find("a").show();$(t.target).val("")},error:function(n){$("#tskErrorMsg").css("color","red");$("#tskErrorMsg").html("Error adding user to group:"+n.responseText);setTimeout(function(){$("#tskErrorMsg").html("")},6e3)}})}}catch(a){$(".overlay").hide()}$(".overlay").hide()},n.prototype.removeUMTaskForceContacts=function(t){try{$(".overlay").show();$("#DivMsgA4AStaffContainer").hide();$("#DivCompanyMsg").hide();$("#DivCommitteeMsg").hide();$("#DivInformationalContactMsg").hide();$("#DivSaveInformationalContactMsg").hide();$("#DivContactMsg").hide();$("#DivSaveContactMsg").hide();$("#DivTaskGroupMsg").show();$("#DivSaveTaskGroupMsg").hide();var i=ko.utils.stringifyJson(t);n.prototype.errorMessage();i="["+i+"]";$.ajax({url:"/api/RemoveGroupUser",type:"post",data:i,contentType:"application/json",success:function(){$("#tskErrorMsg").css("color","green");n.prototype.errorMessage(t.Name+" has been removed successfully!");setTimeout(function(){n.prototype.errorMessage()},6e3)},error:function(i){return $("#tskErrorMsg").css("color","red"),n.prototype.errorMessage("Error in removing"+t.Name+i.responseText),setTimeout(function(){n.prototype.errorMessage()},6e3),$(".overlay").hide(),!1}});n.prototype.selectedTskForUser.remove(t)}catch(r){n.prototype.errorMessage("Error in removing"+t.Name+r);$(".overlay").hide()}$(".overlay").hide()},n.prototype.load=function(t){var r="/api/GetGroupUserlineItem/?GroupId="+t;n.prototype.errorMessage();$.ajax({url:r,type:"GET",contentType:"application/json",success:function(t){var u=JSON.parse(t),r;for(i=0;i<u.length;i++)r={},r.Name=u[i].UserName,r.CompanyName=u[i].CompanyName,r.UserId=u[i].UserId,r.role=u[i].Role,r[u[i].Role.replace(/\s/g,"").trim()]=!0,r.GroupId=u[i].GroupId,r.CheckStatus=u[i].CheckStatus,n.prototype.selectedTskForUser.push(r)},error:function(t){$("#tskErrorMsg").css("color","red");n.prototype.errorMessage("Exception in loading task force user list:"+t.responseText)}})},n}();n.ViewModel=t}(TaskForceWorkGroup||(TaskForceWorkGroup={}));ko.observableArray.fn.distinct=function(n){var t=this;return t.index={},t.index[n]=ko.observable({}),ko.computed(function(){var i={};ko.utils.arrayForEach(t(),function(t){var r=ko.utils.unwrapObservable(t[n]);r&&(i[r]=i[r]||[],i[r].push(t))});t.index[n];t.index[n](i)}),t};CommitteePrimAlt=function(n,t,i,r,u,f,e,o){this.Name=ko.observable(n);this.UserId=ko.observable(t);this.CompanyName=ko.observable(r);this.Type=ko.observable(i);this.Alternate=ko.observable(u);this.Primary=ko.observable(f);this.Informational=ko.observable(e);this.CheckStatus=ko.observable(o)};councilCommitteeGGAViewModel=function(){function r(t){$.ajax({url:t,type:"post",async:!1,contentType:"application/json",success:function(){return n.infoMessage("User removed successfully!"),setTimeout(function(){n.infoMessage("")},6e3),!0},error:function(t){return n.errorMessage("Error occured in remove group user!"+t.responseText),setTimeout(function(){n.errorMessage("")},6e3),$(".overlay").hide(),!1}})}var n=this,t;n.gId=ko.observable($("#hdnGroupId").val());t=$("#hdnGroupId").val();n.errorMessage=ko.observable();n.infoMessage=ko.observable();n.people=ko.observableArray([]).distinct("CompanyName");n.Roles=ko.observableArray([{id:"2",name:"Alternate"},{id:"1",name:"Primary"},{id:"5",name:"Informational"}]);n.role=ko.observable();n.Companies=ko.observableArray();n.company=ko.observable();n.userSelected=ko.observable();n.userSelectedId=ko.observable();n.GetCompanies=$.getJSON("/api/GetCompanies/?isMember=true",function(t){$.each(t,function(t,i){n.Companies.push({id:i,name:t})})});this.selectPrimAltUser=function(t,i){n.userSelected(i.item.label);n.userSelectedId(i.item.text)};this.selectPrimAltUser4Company=function(){var u,f,s,h,a;if(isNaN($("#hdnGroupId").val())||(n.gId($("#hdnGroupId").val()),t=$("#hdnGroupId").val()),isNaN(t)||isNaN(n.gId()))n.errorMessage("Invalid GroupID. Your changes will not be saved! Contact the IT Administrator!"),setTimeout(function(){n.errorMessage("")},6e3);else{var e=n.userSelected(),c=e.indexOf("("),i=e.substring(c+1).replace(")","").trim(),o=e.replace(e.substring(c),""),l=n.role(),r=$("#inpGGAGroupRole option[value='"+l+"']").text(),v=i;$("#hdnGroupTypeId").val()!=9&&$("#hdnGroupTypeId").val()!=10&&r.toLowerCase().trim().indexOf("primary")!==-1&&($("#hdnChairComp").val().trim().indexOf(i)!==-1||$("#hdnViceChairComp").val().trim().indexOf(i)!==-1)?(n.errorMessage("This company already has a representative assigned for Chair/ViceChair. So cannot add Primary!"),setTimeout(function(){n.errorMessage("")},6e3)):(u={},u.Name=o,u.UserId=n.userSelectedId(),u.Type=r,u[r.replace(/\s/g,"").trim()]=!0,u.GroupId=n.gId(),u.CompanyName=i,u.Type="3",f=ko.utils.stringifyJson(u),f="["+f+"]",s=ko.utils.arrayFirst(n.people(),function(t){return n.userSelectedId()==t.UserId()}),s?(n.errorMessage("The user "+s.Name()+" already exists under "+s.CompanyName()+" "),setTimeout(function(){n.errorMessage("")},6e3)):r==="Primary"?(h=!1,a=$.getJSON("/api/checkifcompanyhasrole?GroupId="+n.gId()+"&CompanyName="+i+"&RoleId=1",function(n){h=n}).done(function(){h&&$("#hdnGroupTypeId").val()!=9&&$("#hdnGroupTypeId").val()!=10?(n.errorMessage("A primary has already been set for this "+i+".Please delete the current primary and then add this user!"),setTimeout(function(){n.errorMessage("")},6e3),$("#ggaUser").val(""),n.role(""),n.company(null)):$.ajax({url:"/api/UserGroupGGA",type:"post",data:f,contentType:"application/json",success:function(){return n.people.push(new CommitteePrimAlt(o,n.userSelectedId(),r,i,!0,!1,!1,!1)),n.infoMessage("Successfully added a Primary user to "+i),$("#hdnchkRadioId").val()!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveCommitteeRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveCommitteeRoles").show()),$("#DivRemoveCommitteePrimAlt").find("a").show(),setTimeout(function(){n.infoMessage("")},6e3),!1},error:function(t){n.errorMessage("Error in adding user: "+t.responseText);n.role("");setTimeout(function(){n.errorMessage("")},6e3)}})})):r==="Informational"?$.ajax({url:"/api/UserGroupGGA",type:"post",data:f,contentType:"application/json",success:function(){return n.people.push(new CommitteePrimAlt(o,n.userSelectedId(),r,i,!1,!1,!0,!1)),n.infoMessage("Successfully added an Informational user to "+i),$("#hdnchkRadioId").val()!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveCommitteeRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveCommitteeRoles").show()),$("#DivRemoveCommitteePrimAlt").find("a").show(),setTimeout(function(){n.infoMessage("")},6e3),!1},error:function(t){n.errorMessage("Error in adding user: "+t.responseText);n.role("");setTimeout(function(){n.errorMessage("")},6e3)}}):r==="Alternate"&&$.ajax({url:"/api/UserGroupGGA",type:"post",data:f,contentType:"application/json",success:function(){return n.people.push(new CommitteePrimAlt(o,n.userSelectedId(),r,i,!1,!0,!1,!1)),n.infoMessage("Successfully added an Alternate user to "+i),$("#hdnchkRadioId").val()!="1"?($("input[name='EmailAdmin']").prop("disabled",!0),$("#DivSaveCommitteeRoles").hide()):($("input[name='EmailAdmin']").prop("disabled",!1),$("#DivSaveCommitteeRoles").show()),$("#DivRemoveCommitteePrimAlt").find("a").show(),setTimeout(function(){n.infoMessage("")},6e3),!1},error:function(t){n.errorMessage("Error in adding user: "+t.responseText);n.role("");setTimeout(function(){n.errorMessage("")},6e3)}}),$("#ggaUser").val(""),n.role(""))}};n.removeCommitteePrimAlt=function(t){var i,u;return($(".overlay").show(),isNaN(n.gId()))?(n.errorMessage("GroupId is missing. The user cannot be removed from the group."),setTimeout(function(){n.errorMessage("")},6e3),!1):isNaN(t.UserId())?(n.errorMessage("User Information is missing. The user cannot be removed from the group. Please contact IT"),setTimeout(function(){n.errorMessage("")},6e3),!1):(n.people.remove(t),i=1,t.Type()==="Alternate"&&(i=2),t.Type()==="Informational"&&(i=5),u="/api/RemoveGrpUsrbyUserId/?UserId="+t.UserId()+"&GroupId="+n.gId()+"&RoleId="+i,r(u),$(".overlay").hide(),!1)};this.clearGGAUser=function(){$("#ggaUser").val("");n.userSelected(null);n.userSelectedId(null)};this.GetAllUsers=function(t,i){var f=t.term,r=n.company(),u=$("#inpGGACompanies option[value='"+r+"']").text();$.ajax({url:"/api/GetComapnyUsers/?CompanyName="+u,type:"GET",cache:!1,data:t,dataType:"json",success:function(n){i($.map(n,function(n,t){return{label:t,text:n,value:""}}))}})};this.GetAllUserWithCompany=function(t,i){var e=t.term,u=n.company(),o=$("#inpGGACompanies option[value='"+u+"']").text(),f=$("#hdnGroupTypeId").val(),r="";r=$("#hdnGroupTypeId").val()?"/api/GetAllContacts/?grouptype="+f:"/api/GetAllContacts/";$.ajax({url:r,type:"GET",cache:!1,data:t,dataType:"json",success:function(n){i($.map(n,function(n,t){return{label:t,text:n,value:""}}))}})};n.load=function(t){var r="/api/GetGroupUserlineItem/?GroupId="+t+"&RoleId=1,2,3,4";n.errorMessage("");$.ajax({url:r,type:"GET",contentType:"application/json",success:function(t){var r=JSON.parse(t);for(i=0;i<r.length;i++)r[i].RoleId===1?n.people.push(new CommitteePrimAlt(r[i].UserName,r[i].UserId,r[i].Role,r[i].CompanyName,!0,!1,!1,r[i].CheckStatus)):r[i].RoleId===2?n.people.push(new CommitteePrimAlt(r[i].UserName,r[i].UserId,r[i].Role,r[i].CompanyName,!1,!0,!1,r[i].CheckStatus)):r[i].RoleId===3&&r[i].type===7?($("#GroupChairGGA").val(r[i].UserName+" ("+r[i].CompanyName+")"),$("#hdnChairComp").val(r[i].CompanyName),DisablePrimary()):r[i].RoleId===4&&($("#GroupViceChairGGA").val(r[i].UserName+" ("+r[i].CompanyName+")"),$("#hdnViceChairComp").val(r[i].CompanyName),DisablePrimary())},error:function(t){n.errorMessage("Exception in loading task force user list:"+t.responseText);setTimeout(function(){n.errorMessage("")},6e3)}});r="/api/GetGroupUserlineItem/?GroupId="+t+"&RoleId=5";$.ajax({url:r,type:"GET",contentType:"application/json",success:function(t){var r=JSON.parse(t);for(i=0;i<r.length;i++)n.people.push(new CommitteePrimAlt(r[i].UserName,r[i].UserId,r[i].Role,r[i].CompanyName,!1,!1,!0,r[i].CheckStatus))},error:function(n){ViewModel.prototype.errorMessage(n.responseText)}})};this.getLanguagesCommittee=function(n,t){$(".overlay").show();var r=$("#hdnGroupTypeId").val(),i="";i=$("#hdnGroupTypeId").val()?"/api/GetAllContacts/?grouptype="+r:"/api/GetAllContacts/";$.ajax({url:i,type:"GET",cache:!1,data:n,dataType:"json",success:function(n){t($.map(n,function(n,t){return{label:t,text:n,value:""}}))}});$(".overlay").hide()};this.selectCommitteeChair=function(n,t){var u,i,r,f,e;try{if($(".overlay").show(),u=0,u=$("#hdnGroupId").val(),$("#DivMsgA4AStaffContainer").hide(),$("#DivCompanyMsg").hide(),$("#DivCommitteeMsg").show(),$("#DivInformationalContactMsg").hide(),$("#DivSaveInformationalContactMsg").hide(),$("#DivContactMsg").hide(),$("#DivSaveContactMsg").hide(),$("#DivTaskGroupMsg").hide(),$("#DivSaveTaskGroupMsg").hide(),i="",t.item.label){i=t.item.label.trim().slice(t.item.label.lastIndexOf("(")+1,-1);$("#hdnChairComp").val(i);r=$("#Prim"+i.replace(/\s/g,""));try{if(r!==null&&r.val().length>0&&$("#hdnGroupTypeId").val()!=9&&$("#hdnGroupTypeId").val()!=10&&$("#hdnGroupTypeId").val()!=1&&$("#hdnGroupTypeId").val()!=2)return $(".spnMessage").text("You already have a primary representative for "+i+".  Select another company chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").text("")},6e3),$("#GroupChairGGA").val(""),$("#GroupChair").val(""),$("#hdnChairComp").val(""),$(".overlay").hide(),!1;if($("#Prim"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnChairComp").val().replace(/\s/g,"")).val().length>0)return $(".spnMessage").html("You already have a primary representative and alternate representative for "+i+".  Select another company chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").html("")},6e3),$("#GroupChair").val(""),$("#hdnChairComp").val(""),$(".overlay").hide(),!1}catch(o){$(".overlay").hide()}}if(!(i.length>0))return $(".spnMessage").text("No company name found for Chair. So the selection could not be completed"),$(".overlay").hide(),!1;f=[{Name:t.item.label,UserId:t.item.text,Chair:!0,GroupId:$("#hdnGroupId").val(),CompanyName:i,Type:"7"}];e=ko.utils.stringifyJson(f);$("#hdnChkStaffUserId").val(t.item.text);$.ajax({url:"/api/UserGroup",type:"post",async:!1,data:e,contentType:"application/json",success:function(){$(".spnMessage").html(t.item.label+"has been successfully saved as Chair!!").css("color","green");setTimeout(function(){$(".spnMessage").html("")},6e3)},error:function(n){$(".spnMessage").html("Error in saving Group Chair"+n.responseText).css("color","red");t.item.value="";$("#hdnViceChairComp").val().indexOf($("#hdnChairComp").val())<0&&($("#Prim"+i.replace(/\s/g,"")).prop("disabled",!1),$("#Alt"+i.replace(/\s/g,"")).prop("disabled",!1));$("#hdnChairComp").val("")}}).done(function(){$(".overlay").hide()})}catch(o){$(".overlay").hide()}$(".overlay").hide()};this.selectCommitteeViceChair=function(n,t){var u,i,r,f,e;try{if($(".overlay").show(),u=0,u=$("#hdnGroupId").val(),i="",$("#DivMsgA4AStaffContainer").hide(),$("#DivCompanyMsg").hide(),$("#DivCommitteeMsg").show(),$("#DivInformationalContactMsg").hide(),$("#DivSaveInformationalContactMsg").hide(),$("#DivContactMsg").hide(),$("#DivSaveContactMsg").hide(),$("#DivTaskGroupMsg").hide(),$("#DivSaveTaskGroupMsg").hide(),t.item.label){i=t.item.label.trim().slice(t.item.label.lastIndexOf("(")+1,-1);$("#hdnViceChairComp").val(i);try{if(r=$("#Prim"+i.replace(/\s/g,"")),r!==null&&r.val().length>0&&$("#hdnGroupTypeId").val()!=9&&$("#hdnGroupTypeId").val()!=10&&$("#hdnGroupTypeId").val()!=1&&$("#hdnGroupTypeId").val()!=2)return $(".spnMessage").html("You already have a primary representative for "+i+".  Select another company vice chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").html("")},6e3),$("#GroupViceChairGGA").val(""),$("#hdnViceChairComp").val(""),$(".overlay").hide(),!1;if($("#Prim"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0&&$("#Alt"+$("#hdnViceChairComp").val().replace(/\s/g,"")).val().length>0)return $(".spnMessage").html("You already have a primary representative and alternate representative for "+i+".  Select another company vice chair or delete the contact below.").css("color","red"),setTimeout(function(){$(".spnMessage").html("")},6e3),$("#GroupViceChair").val(""),$("#hdnViceChairComp").val(""),$(".overlay").hide(),!1}catch(o){}}if(!(i.length>0)){$(".spnMessage").html("No company name found for Vice Chair. So the selection could not be completed");setTimeout(function(){$(".spnMessage").html("")},6e3);return}$("#hdnChkGroupUserId").val(t.item.text);f=[{Name:t.item.label,UserId:t.item.text,ViceChair:!0,GroupId:$("#hdnGroupId").val(),CompanyName:i,Type:"7"}];e=ko.utils.stringifyJson(f);$.ajax({url:"/api/UserGroup",type:"post",async:!1,data:e,contentType:"application/json",success:function(){$(".spnMessage").html(t.item.label+"has been successfully saved as Vice Chair!!").css("color","green");setTimeout(function(){$(".spnMessage").html("")},6e3);$("#hdnPrimary").val()},error:function(n){$(".spnMessage").html("Error in saving Group Vice Chair"+n.responseText).css("color","red");t.item.value="";$("#hdnChairComp").val().indexOf($("#hdnViceChairComp").val())<0&&($("#Prim"+i.replace(/\s/g,"")).prop("disabled",!1),$("#Alt"+i.replace(/\s/g,"")).prop("disabled",!1));$("#hdnViceChairComp").val("")}}).done(function(){$(".overlay").hide()})}catch(o){$(".overlay").hide()}$(".overlay").hide()};this.selectchkCommitteeStaff=function(n,t){ChkStaffCommittee.set($("#hdnGroupTypeId").val(),t.target.checked)};this.selectchkCommitteeGroupUser=function(n,t){ChkGroupUserCommittee.set($("#hdnGroupTypeId").val(),t.target.checked)}};A4AStaffViewModel=new A4AStaffModel;UMSubscribe=new AutoCompleteExample.ViewModel;$(document).ready(function(){function n(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]}function t(n){var t="/api/GetGroupUserlineItem/?GroupId="+n;$.ajax({url:t,type:"GET",contentType:"application/json",success:function(n){var t=JSON.parse(n),u,r;for(i=0;i<t.length;i++)try{u=t[i].UserName;r=t[i].CompanyName.replace(/\s/g,"");t[i].RoleId===1?(sessionStorage.setItem("Prim"+r,u),GetCompanyNamePrimary.set("Prim"+r,t[i].CheckStatus)):t[i].RoleId===2?(sessionStorage.setItem("Alt"+r,u),GetCompanyNameAlternate.set("Alt"+r,t[i].CheckStatus)):t[i].RoleId===3?(t[i].Type=="3"?($("#GroupChair").val(u+" ("+r+")"),$("#hdnChairComp").val(t[i].CompanyName),CheckStatusStaff(t[i].CheckStatus)):t[i].Type=="7"&&($("#GroupChairGGA").val(u+" ("+r+")"),$("#hdnChairComp").val(t[i].CompanyName),CheckStatusCommitteeStaff(t[i].CheckStatus)),$("#hdnChkStaffUserId").val(t[i].UserId)):t[i].RoleId===4&&($("#GroupViceChair").val(u+" ("+r+")"),$("#hdnViceChairComp").val(t[i].CompanyName),$("#hdnChkGroupUserId").val(t[i].UserId),CheckStatusGroupUser(t[i].CheckStatus),CheckStatusCommitteeGroupUser(t[i].CheckStatus))}catch(f){console.log("error in setting primary/Alternate"+f)}},error:function(){}})}sessionStorage.clear();getManagedGroupCount(parseInt(n("gid"),0));$("#breadcrumb ul").append('<li><a href="/group/list/"> Group List <\/a><\/li>');ko.components.register("primaryalternate",{viewModel:councilCommitteeViewModel,template:"<div class='row' style='margin-bottom:8px;'><div class='col-sm-2'><span class='niceLabel' data-bind='text: Company'><\/span><\/div><div class='col-sm-2'><input type='text' class='P1 chosen form-control' style='width:300px;' data-bind='value:PrimUserValue,attr: { id:PrimaryID()},ko_autocomplete: { source: getCompanyUsers, select: selectPrimary ,minLength: 3,close: closeSelect }' /><\/div><div class='col-sm-1' style='text-align:center'><input type='checkbox' name='EmailAdmin' style='margin-right:10px' data-bind='attr: { id:ChkPrimaryID()}, event:{ change: selectCompanyNamePrimary}, checked:CheckStatusPrimary' /><\/div><div class='col-sm-1'><a href='#' class='text-danger btndelete' data-bind='click: $data.removePrimGroupUser'>Delete<\/a><\/div><div class='col-sm-2'><input type='text' class='A1 chosen form-control' style='width:300px;' data-bind='value:AltUserValue,attr: { id:AlternateID() },ko_autocomplete: { source: getCompanyUsers, select: selectAlternate ,minLength:3,close: closeSelect }' /><\/div><div class='col-sm-1' style='text-align:center'><input type='checkbox' name='EmailAdmin' style='margin-right:10px' data-bind='attr: { id:ChkAlternateID()}, event:{ change: selectCompanyNameAlternate}, checked:CheckStatusAlternate' /><\/div><div class='col-sm-1'><a href='#' class='text-danger btndelete' data-bind='click: removeAltGroupUser'>Delete<\/a><\/div><\/div>"});ko.validation.init({insertMessages:!1});parseInt(n("gid"))>0?(enableForm(),groupRegisterViewModel={addGroupViewModel:new Group,addA4AStaffViewModel:A4AStaffViewModel,UMSubscribeModel:UMSubscribe,addTaskForceWorkGroup:new TaskForceWorkGroup.ViewModel,addCouncilCommitteeGGA:new councilCommitteeGGAViewModel},$.when(t(parseInt(n("gid"),0))).done(setTimeout(function(){ko.applyBindings(groupRegisterViewModel)},1300)),groupRegisterViewModel.addGroupViewModel.errors=ko.validation.group(groupRegisterViewModel.addGroupViewModel),$.when(groupRegisterViewModel.addGroupViewModel.getData1(),groupRegisterViewModel.addGroupViewModel.getData2(),groupRegisterViewModel.addGroupViewModel.getDepartments(),groupRegisterViewModel.addGroupViewModel.getDataGroupTypes(),groupRegisterViewModel.addGroupViewModel.getDataLiaisons(),groupRegisterViewModel.addA4AStaffViewModel.getA4AStaffList(),groupRegisterViewModel.addTaskForceWorkGroup.gettaskRoles()).done()):(groupRegisterViewModel={addGroupViewModel:new Group,addA4AStaffViewModel:A4AStaffViewModel,UMSubscribeModel:UMSubscribe,addTaskForceWorkGroup:new TaskForceWorkGroup.ViewModel,addCouncilCommitteeGGA:new councilCommitteeGGAViewModel},disableForm(),ko.applyBindings(groupRegisterViewModel),groupRegisterViewModel.addGroupViewModel.errors=ko.validation.group(groupRegisterViewModel.addGroupViewModel),$.when(groupRegisterViewModel.addGroupViewModel.getData1(),groupRegisterViewModel.addGroupViewModel.getData2(),groupRegisterViewModel.addGroupViewModel.getDepartments(),groupRegisterViewModel.addGroupViewModel.getDataGroupTypes(),groupRegisterViewModel.addGroupViewModel.getDataLiaisons(),groupRegisterViewModel.addA4AStaffViewModel.getA4AStaffList(),groupRegisterViewModel.addTaskForceWorkGroup.gettaskRoles()).done())});